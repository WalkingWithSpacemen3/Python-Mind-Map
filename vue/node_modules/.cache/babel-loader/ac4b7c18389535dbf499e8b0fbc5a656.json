{"ast":null,"code":"import EventEmitter from 'eventemitter3';\n/** \r\n * javascript comment \r\n * @Author: 王林25 \r\n * @Date: 2021-04-07 14:53:09 \r\n * @Desc: 事件类 \r\n */\n\nclass Event extends EventEmitter {\n  /** \r\n   * javascript comment \r\n   * @Author: 王林25 \r\n   * @Date: 2021-04-07 14:53:25 \r\n   * @Desc: 构造函数 \r\n   */\n  constructor(opt = {}) {\n    super();\n    this.opt = opt;\n    this.mindMap = opt.mindMap;\n    this.isLeftMousedown = false;\n    this.mousedownPos = {\n      x: 0,\n      y: 0\n    };\n    this.mousemovePos = {\n      x: 0,\n      y: 0\n    };\n    this.mousemoveOffset = {\n      x: 0,\n      y: 0\n    };\n    this.bindFn();\n    this.bind();\n  }\n  /** \r\n   * javascript comment \r\n   * @Author: 王林25 \r\n   * @Date: 2021-04-07 15:52:24 \r\n   * @Desc: 绑定函数上下文 \r\n   */\n\n\n  bindFn() {\n    this.onDrawClick = this.onDrawClick.bind(this);\n    this.onMousedown = this.onMousedown.bind(this);\n    this.onMousemove = this.onMousemove.bind(this);\n    this.onMouseup = this.onMouseup.bind(this);\n    this.onMousewheel = this.onMousewheel.bind(this);\n    this.onContextmenu = this.onContextmenu.bind(this);\n    this.onSvgMousedown = this.onSvgMousedown.bind(this);\n  }\n  /** \r\n   * javascript comment \r\n   * @Author: 王林25 \r\n   * @Date: 2021-04-07 14:53:43 \r\n   * @Desc: 绑定事件 \r\n   */\n\n\n  bind() {\n    this.mindMap.svg.on('click', this.onDrawClick);\n    this.mindMap.el.addEventListener('mousedown', this.onMousedown);\n    this.mindMap.svg.on('mousedown', this.onSvgMousedown);\n    window.addEventListener('mousemove', this.onMousemove);\n    window.addEventListener('mouseup', this.onMouseup); // 兼容火狐浏览器\n\n    if (window.navigator.userAgent.toLowerCase().indexOf(\"firefox\") != -1) {\n      this.mindMap.el.addEventListener('DOMMouseScroll', this.onMousewheel);\n    } else {\n      this.mindMap.el.addEventListener('mousewheel', this.onMousewheel);\n    }\n\n    this.mindMap.svg.on('contextmenu', this.onContextmenu);\n  }\n  /** \r\n   * javascript comment \r\n   * @Author: 王林25 \r\n   * @Date: 2021-04-07 15:40:51 \r\n   * @Desc: 解绑事件 \r\n   */\n\n\n  unbind() {\n    this.mindMap.svg.off('click', this.onDrawClick);\n    this.mindMap.el.removeEventListener('mousedown', this.onMousedown);\n    window.removeEventListener('mousemove', this.onMousemove);\n    window.removeEventListener('mouseup', this.onMouseup);\n    this.mindMap.el.removeEventListener('mousewheel', this.onMousewheel);\n    this.mindMap.svg.off('contextmenu', this.onContextmenu);\n  }\n  /** \r\n   * @Author: 王林 \r\n   * @Date: 2021-04-24 13:19:39 \r\n   * @Desc:  画布的单击事件\r\n   */\n\n\n  onDrawClick(e) {\n    this.emit('draw_click', e);\n  }\n  /** \r\n   * @Author: 王林 \r\n   * @Date: 2021-07-16 13:37:30 \r\n   * @Desc:  svg画布的鼠标按下事件\r\n   */\n\n\n  onSvgMousedown(e) {\n    this.emit('svg_mousedown', e);\n  }\n  /** \r\n   * javascript comment \r\n   * @Author: 王林25 \r\n   * @Date: 2021-04-07 15:17:35 \r\n   * @Desc: 鼠标按下事件 \r\n   */\n\n\n  onMousedown(e) {\n    // e.preventDefault()\n    // 鼠标左键\n    if (e.which === 1) {\n      this.isLeftMousedown = true;\n    }\n\n    this.mousedownPos.x = e.clientX;\n    this.mousedownPos.y = e.clientY;\n    this.emit('mousedown', e, this);\n  }\n  /** \r\n   * javascript comment \r\n   * @Author: 王林25 \r\n   * @Date: 2021-04-07 15:18:32 \r\n   * @Desc: 鼠标移动事件 \r\n   */\n\n\n  onMousemove(e) {\n    // e.preventDefault()\n    this.mousemovePos.x = e.clientX;\n    this.mousemovePos.y = e.clientY;\n    this.mousemoveOffset.x = e.clientX - this.mousedownPos.x;\n    this.mousemoveOffset.y = e.clientY - this.mousedownPos.y;\n    this.emit('mousemove', e, this);\n\n    if (this.isLeftMousedown) {\n      this.emit('drag', e, this);\n    }\n  }\n  /** \r\n   * javascript comment \r\n   * @Author: 王林25 \r\n   * @Date: 2021-04-07 15:18:57 \r\n   * @Desc: 鼠标松开事件 \r\n   */\n\n\n  onMouseup(e) {\n    this.isLeftMousedown = false;\n    this.emit('mouseup', e, this);\n  }\n  /** \r\n   * javascript comment \r\n   * @Author: 王林25 \r\n   * @Date: 2021-04-07 15:46:27 \r\n   * @Desc: 鼠标滚动 \r\n   */\n\n\n  onMousewheel(e) {\n    e.stopPropagation();\n    e.preventDefault();\n    let dir;\n\n    if ((e.wheelDeltaY || e.detail) > 0) {\n      dir = 'up';\n    } else {\n      dir = 'down';\n    }\n\n    this.emit('mousewheel', e, dir, this);\n  }\n  /** \r\n   * @Author: 王林 \r\n   * @Date: 2021-07-10 22:34:13 \r\n   * @Desc: 鼠标右键菜单事件 \r\n   */\n\n\n  onContextmenu(e) {\n    e.preventDefault();\n    this.emit('contextmenu', e);\n  }\n\n}\n\nexport default Event;","map":{"version":3,"names":["EventEmitter","Event","constructor","opt","mindMap","isLeftMousedown","mousedownPos","x","y","mousemovePos","mousemoveOffset","bindFn","bind","onDrawClick","onMousedown","onMousemove","onMouseup","onMousewheel","onContextmenu","onSvgMousedown","svg","on","el","addEventListener","window","navigator","userAgent","toLowerCase","indexOf","unbind","off","removeEventListener","e","emit","which","clientX","clientY","stopPropagation","preventDefault","dir","wheelDeltaY","detail"],"sources":["C:/Users/13007/Documents/GinTest/vue/node_modules/simple-mind-map/src/Event.js"],"sourcesContent":["import EventEmitter from 'eventemitter3'\r\n\r\n/** \r\n * javascript comment \r\n * @Author: 王林25 \r\n * @Date: 2021-04-07 14:53:09 \r\n * @Desc: 事件类 \r\n */\r\nclass Event extends EventEmitter {\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2021-04-07 14:53:25 \r\n     * @Desc: 构造函数 \r\n     */\r\n    constructor(opt = {}) {\r\n        super()\r\n        this.opt = opt\r\n        this.mindMap = opt.mindMap\r\n        this.isLeftMousedown = false\r\n        this.mousedownPos = {\r\n            x: 0,\r\n            y: 0\r\n        }\r\n        this.mousemovePos = {\r\n            x: 0,\r\n            y: 0\r\n        }\r\n        this.mousemoveOffset = {\r\n            x: 0,\r\n            y: 0\r\n        }\r\n        this.bindFn()\r\n        this.bind()\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2021-04-07 15:52:24 \r\n     * @Desc: 绑定函数上下文 \r\n     */\r\n    bindFn() {\r\n        this.onDrawClick = this.onDrawClick.bind(this)\r\n        this.onMousedown = this.onMousedown.bind(this)\r\n        this.onMousemove = this.onMousemove.bind(this)\r\n        this.onMouseup = this.onMouseup.bind(this)\r\n        this.onMousewheel = this.onMousewheel.bind(this)\r\n        this.onContextmenu = this.onContextmenu.bind(this)\r\n        this.onSvgMousedown = this.onSvgMousedown.bind(this)\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2021-04-07 14:53:43 \r\n     * @Desc: 绑定事件 \r\n     */\r\n    bind() {\r\n        this.mindMap.svg.on('click', this.onDrawClick)\r\n        this.mindMap.el.addEventListener('mousedown', this.onMousedown)\r\n        this.mindMap.svg.on('mousedown', this.onSvgMousedown)\r\n        window.addEventListener('mousemove', this.onMousemove)\r\n        window.addEventListener('mouseup', this.onMouseup)\r\n        // 兼容火狐浏览器\r\n        if(window.navigator.userAgent.toLowerCase().indexOf(\"firefox\") != -1){\r\n            this.mindMap.el.addEventListener('DOMMouseScroll', this.onMousewheel)\r\n        } else {\r\n            this.mindMap.el.addEventListener('mousewheel', this.onMousewheel)\r\n        }\r\n        this.mindMap.svg.on('contextmenu', this.onContextmenu)\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2021-04-07 15:40:51 \r\n     * @Desc: 解绑事件 \r\n     */\r\n    unbind() {\r\n        this.mindMap.svg.off('click', this.onDrawClick)\r\n        this.mindMap.el.removeEventListener('mousedown', this.onMousedown)\r\n        window.removeEventListener('mousemove', this.onMousemove)\r\n        window.removeEventListener('mouseup', this.onMouseup)\r\n        this.mindMap.el.removeEventListener('mousewheel', this.onMousewheel)\r\n        this.mindMap.svg.off('contextmenu', this.onContextmenu)\r\n    }\r\n\r\n    /** \r\n     * @Author: 王林 \r\n     * @Date: 2021-04-24 13:19:39 \r\n     * @Desc:  画布的单击事件\r\n     */\r\n    onDrawClick(e) {\r\n        this.emit('draw_click', e)\r\n    }\r\n\r\n    /** \r\n     * @Author: 王林 \r\n     * @Date: 2021-07-16 13:37:30 \r\n     * @Desc:  svg画布的鼠标按下事件\r\n     */\r\n    onSvgMousedown(e) {\r\n        this.emit('svg_mousedown', e)\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2021-04-07 15:17:35 \r\n     * @Desc: 鼠标按下事件 \r\n     */\r\n    onMousedown(e) {\r\n        // e.preventDefault()\r\n        // 鼠标左键\r\n        if (e.which === 1) {\r\n            this.isLeftMousedown = true\r\n        }\r\n        this.mousedownPos.x = e.clientX\r\n        this.mousedownPos.y = e.clientY\r\n        this.emit('mousedown', e, this)\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2021-04-07 15:18:32 \r\n     * @Desc: 鼠标移动事件 \r\n     */\r\n    onMousemove(e) {\r\n        // e.preventDefault()\r\n        this.mousemovePos.x = e.clientX\r\n        this.mousemovePos.y = e.clientY\r\n        this.mousemoveOffset.x = e.clientX - this.mousedownPos.x\r\n        this.mousemoveOffset.y = e.clientY - this.mousedownPos.y\r\n        this.emit('mousemove', e, this)\r\n        if (this.isLeftMousedown) {\r\n            this.emit('drag', e, this)\r\n        }\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2021-04-07 15:18:57 \r\n     * @Desc: 鼠标松开事件 \r\n     */\r\n    onMouseup(e) {\r\n        this.isLeftMousedown = false\r\n        this.emit('mouseup', e, this)\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2021-04-07 15:46:27 \r\n     * @Desc: 鼠标滚动 \r\n     */\r\n    onMousewheel(e) {\r\n        e.stopPropagation()\r\n        e.preventDefault()\r\n        let dir\r\n        if ((e.wheelDeltaY || e.detail) > 0) {\r\n            dir = 'up'\r\n        } else {\r\n            dir = 'down'\r\n        }\r\n        this.emit('mousewheel', e, dir, this)\r\n    }\r\n\r\n    /** \r\n     * @Author: 王林 \r\n     * @Date: 2021-07-10 22:34:13 \r\n     * @Desc: 鼠标右键菜单事件 \r\n     */\r\n    onContextmenu(e) {\r\n        e.preventDefault()\r\n        this.emit('contextmenu', e)\r\n    }\r\n}\r\n\r\nexport default Event"],"mappings":"AAAA,OAAOA,YAAP,MAAyB,eAAzB;AAEA;AACA;AACA;AACA;AACA;AACA;;AACA,MAAMC,KAAN,SAAoBD,YAApB,CAAiC;EAC7B;AACJ;AACA;AACA;AACA;AACA;EACIE,WAAW,CAACC,GAAG,GAAG,EAAP,EAAW;IAClB;IACA,KAAKA,GAAL,GAAWA,GAAX;IACA,KAAKC,OAAL,GAAeD,GAAG,CAACC,OAAnB;IACA,KAAKC,eAAL,GAAuB,KAAvB;IACA,KAAKC,YAAL,GAAoB;MAChBC,CAAC,EAAE,CADa;MAEhBC,CAAC,EAAE;IAFa,CAApB;IAIA,KAAKC,YAAL,GAAoB;MAChBF,CAAC,EAAE,CADa;MAEhBC,CAAC,EAAE;IAFa,CAApB;IAIA,KAAKE,eAAL,GAAuB;MACnBH,CAAC,EAAE,CADgB;MAEnBC,CAAC,EAAE;IAFgB,CAAvB;IAIA,KAAKG,MAAL;IACA,KAAKC,IAAL;EACH;EAED;AACJ;AACA;AACA;AACA;AACA;;;EACID,MAAM,GAAG;IACL,KAAKE,WAAL,GAAmB,KAAKA,WAAL,CAAiBD,IAAjB,CAAsB,IAAtB,CAAnB;IACA,KAAKE,WAAL,GAAmB,KAAKA,WAAL,CAAiBF,IAAjB,CAAsB,IAAtB,CAAnB;IACA,KAAKG,WAAL,GAAmB,KAAKA,WAAL,CAAiBH,IAAjB,CAAsB,IAAtB,CAAnB;IACA,KAAKI,SAAL,GAAiB,KAAKA,SAAL,CAAeJ,IAAf,CAAoB,IAApB,CAAjB;IACA,KAAKK,YAAL,GAAoB,KAAKA,YAAL,CAAkBL,IAAlB,CAAuB,IAAvB,CAApB;IACA,KAAKM,aAAL,GAAqB,KAAKA,aAAL,CAAmBN,IAAnB,CAAwB,IAAxB,CAArB;IACA,KAAKO,cAAL,GAAsB,KAAKA,cAAL,CAAoBP,IAApB,CAAyB,IAAzB,CAAtB;EACH;EAED;AACJ;AACA;AACA;AACA;AACA;;;EACIA,IAAI,GAAG;IACH,KAAKR,OAAL,CAAagB,GAAb,CAAiBC,EAAjB,CAAoB,OAApB,EAA6B,KAAKR,WAAlC;IACA,KAAKT,OAAL,CAAakB,EAAb,CAAgBC,gBAAhB,CAAiC,WAAjC,EAA8C,KAAKT,WAAnD;IACA,KAAKV,OAAL,CAAagB,GAAb,CAAiBC,EAAjB,CAAoB,WAApB,EAAiC,KAAKF,cAAtC;IACAK,MAAM,CAACD,gBAAP,CAAwB,WAAxB,EAAqC,KAAKR,WAA1C;IACAS,MAAM,CAACD,gBAAP,CAAwB,SAAxB,EAAmC,KAAKP,SAAxC,EALG,CAMH;;IACA,IAAGQ,MAAM,CAACC,SAAP,CAAiBC,SAAjB,CAA2BC,WAA3B,GAAyCC,OAAzC,CAAiD,SAAjD,KAA+D,CAAC,CAAnE,EAAqE;MACjE,KAAKxB,OAAL,CAAakB,EAAb,CAAgBC,gBAAhB,CAAiC,gBAAjC,EAAmD,KAAKN,YAAxD;IACH,CAFD,MAEO;MACH,KAAKb,OAAL,CAAakB,EAAb,CAAgBC,gBAAhB,CAAiC,YAAjC,EAA+C,KAAKN,YAApD;IACH;;IACD,KAAKb,OAAL,CAAagB,GAAb,CAAiBC,EAAjB,CAAoB,aAApB,EAAmC,KAAKH,aAAxC;EACH;EAED;AACJ;AACA;AACA;AACA;AACA;;;EACIW,MAAM,GAAG;IACL,KAAKzB,OAAL,CAAagB,GAAb,CAAiBU,GAAjB,CAAqB,OAArB,EAA8B,KAAKjB,WAAnC;IACA,KAAKT,OAAL,CAAakB,EAAb,CAAgBS,mBAAhB,CAAoC,WAApC,EAAiD,KAAKjB,WAAtD;IACAU,MAAM,CAACO,mBAAP,CAA2B,WAA3B,EAAwC,KAAKhB,WAA7C;IACAS,MAAM,CAACO,mBAAP,CAA2B,SAA3B,EAAsC,KAAKf,SAA3C;IACA,KAAKZ,OAAL,CAAakB,EAAb,CAAgBS,mBAAhB,CAAoC,YAApC,EAAkD,KAAKd,YAAvD;IACA,KAAKb,OAAL,CAAagB,GAAb,CAAiBU,GAAjB,CAAqB,aAArB,EAAoC,KAAKZ,aAAzC;EACH;EAED;AACJ;AACA;AACA;AACA;;;EACIL,WAAW,CAACmB,CAAD,EAAI;IACX,KAAKC,IAAL,CAAU,YAAV,EAAwBD,CAAxB;EACH;EAED;AACJ;AACA;AACA;AACA;;;EACIb,cAAc,CAACa,CAAD,EAAI;IACd,KAAKC,IAAL,CAAU,eAAV,EAA2BD,CAA3B;EACH;EAED;AACJ;AACA;AACA;AACA;AACA;;;EACIlB,WAAW,CAACkB,CAAD,EAAI;IACX;IACA;IACA,IAAIA,CAAC,CAACE,KAAF,KAAY,CAAhB,EAAmB;MACf,KAAK7B,eAAL,GAAuB,IAAvB;IACH;;IACD,KAAKC,YAAL,CAAkBC,CAAlB,GAAsByB,CAAC,CAACG,OAAxB;IACA,KAAK7B,YAAL,CAAkBE,CAAlB,GAAsBwB,CAAC,CAACI,OAAxB;IACA,KAAKH,IAAL,CAAU,WAAV,EAAuBD,CAAvB,EAA0B,IAA1B;EACH;EAED;AACJ;AACA;AACA;AACA;AACA;;;EACIjB,WAAW,CAACiB,CAAD,EAAI;IACX;IACA,KAAKvB,YAAL,CAAkBF,CAAlB,GAAsByB,CAAC,CAACG,OAAxB;IACA,KAAK1B,YAAL,CAAkBD,CAAlB,GAAsBwB,CAAC,CAACI,OAAxB;IACA,KAAK1B,eAAL,CAAqBH,CAArB,GAAyByB,CAAC,CAACG,OAAF,GAAY,KAAK7B,YAAL,CAAkBC,CAAvD;IACA,KAAKG,eAAL,CAAqBF,CAArB,GAAyBwB,CAAC,CAACI,OAAF,GAAY,KAAK9B,YAAL,CAAkBE,CAAvD;IACA,KAAKyB,IAAL,CAAU,WAAV,EAAuBD,CAAvB,EAA0B,IAA1B;;IACA,IAAI,KAAK3B,eAAT,EAA0B;MACtB,KAAK4B,IAAL,CAAU,MAAV,EAAkBD,CAAlB,EAAqB,IAArB;IACH;EACJ;EAED;AACJ;AACA;AACA;AACA;AACA;;;EACIhB,SAAS,CAACgB,CAAD,EAAI;IACT,KAAK3B,eAAL,GAAuB,KAAvB;IACA,KAAK4B,IAAL,CAAU,SAAV,EAAqBD,CAArB,EAAwB,IAAxB;EACH;EAED;AACJ;AACA;AACA;AACA;AACA;;;EACIf,YAAY,CAACe,CAAD,EAAI;IACZA,CAAC,CAACK,eAAF;IACAL,CAAC,CAACM,cAAF;IACA,IAAIC,GAAJ;;IACA,IAAI,CAACP,CAAC,CAACQ,WAAF,IAAiBR,CAAC,CAACS,MAApB,IAA8B,CAAlC,EAAqC;MACjCF,GAAG,GAAG,IAAN;IACH,CAFD,MAEO;MACHA,GAAG,GAAG,MAAN;IACH;;IACD,KAAKN,IAAL,CAAU,YAAV,EAAwBD,CAAxB,EAA2BO,GAA3B,EAAgC,IAAhC;EACH;EAED;AACJ;AACA;AACA;AACA;;;EACIrB,aAAa,CAACc,CAAD,EAAI;IACbA,CAAC,CAACM,cAAF;IACA,KAAKL,IAAL,CAAU,aAAV,EAAyBD,CAAzB;EACH;;AA1K4B;;AA6KjC,eAAe/B,KAAf"},"metadata":{},"sourceType":"module"}
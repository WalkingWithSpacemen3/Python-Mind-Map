{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\nimport \"core-js/modules/es.array.push.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport request from \"@/utils/request\";\nexport default {\n  name: \"LoginPage\",\n\n  data() {\n    const checkID = (rule, value, callback) => {\n      if (!value) {\n        return callback(new Error('学号不能为空'));\n      }\n\n      let regPos = /[0-9]/;\n\n      if (!regPos.test(value)) {\n        callback(new Error('请输入学号'));\n      } else {\n        if (value.length !== 12) {\n          callback(new Error('学号必须为12位'));\n        } else {\n          callback();\n        }\n      }\n    };\n\n    const validatePass = (rule, value, callback) => {\n      if (value === '') {\n        callback(new Error('请输入密码'));\n      } else {\n        callback();\n      }\n    };\n\n    return {\n      isLogin: false,\n      User: {\n        // name: '张三',\n        StudentID: '202034340099',\n        Password: ''\n      },\n      loginDialog: false,\n      rules: {\n        StudentID: [{\n          validator: checkID,\n          trigger: 'blur'\n        }],\n        Password: [{\n          validator: validatePass,\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n\n  methods: {\n    login() {\n      request.post(\"http://localhost:6679/login\", this.User).then(res => {\n        if (res.data.code === 0) {\n          this.$message.success('登陆成功！'); // let userInfo = {\n          //     isLogin: true,\n          //     manage: true,\n          //     userID: this.User.StudentID,\n          //     name: this.name\n          // }\n          // window.localStorage.setItem(\"userInfo\", JSON.stringify(userInfo));\n          // this.$store.state.userInfo = userInfo;\n\n          let token = res.data.token;\n          window.localStorage.setItem(\"token\", token);\n          this.$router.push('/main');\n        } else {\n          this.$message({\n            type: \"error\",\n            message: \"登陆失败\"\n          });\n        }\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;AAoBA;AAEA;EACAA,iBADA;;EAEAC;IACA;MACA;QACA;MACA;;MACA;;MACA;QACAC;MACA,CAFA,MAEA;QACA;UACAA;QACA,CAFA,MAEA;UACAA;QACA;MACA;IACA,CAdA;;IAeA;MACA;QACAA;MACA,CAFA,MAEA;QACAA;MACA;IACA,CANA;;IAOA;MACAC,cADA;MAEAC;QACA;QACAC,yBAFA;QAGAC;MAHA,CAFA;MAOAC,kBAPA;MAQAC;QACAH,YACA;UAAAI;UAAAC;QAAA,CADA,CADA;QAIAJ,WACA;UAAAG;UAAAC;QAAA,CADA;MAJA;IARA;EAiBA,CA1CA;;EA2CAC;IACAC;MACAC;QACA;UACA,+BADA,CAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACAC;UACA;QACA,CAdA,MAcA;UACA;YACAC,aADA;YAEAC;UAFA;QAIA;MACA,CArBA;IAsBA;;EAxBA;AA3CA","names":["name","data","callback","isLogin","User","StudentID","Password","loginDialog","rules","validator","trigger","methods","login","request","window","type","message"],"sourceRoot":"src/views","sources":["LoginPage.vue"],"sourcesContent":["<template>\n    <el-container>\n        <el-main>\n            <div class=\"header\">登录</div>\n            <el-form ref=\"User\" :model=\"User\" :rules=\"rules\">\n                <el-form-item label=\"学号\" prop=\"StudentID\">\n                    <el-input v-model=\"User.StudentID\" placeholder=\"学号\" clearable></el-input>\n                </el-form-item>\n                <el-form-item label=\"密码\" prop=\"Password\">\n                    <el-input type=\"password\" v-model=\"User.Password\" placeholder=\"密码\" clearable></el-input>\n                </el-form-item>\n                <el-form-item>\n                    <el-button type=\"primary\" @click=\"login\" class=\"btn\">登 录</el-button>\n                </el-form-item>\n            </el-form>\n        </el-main>\n    </el-container>\n</template>\n\n<script>\nimport request from \"@/utils/request\";\n\nexport default {\n    name: \"LoginPage\",\n    data() {\n        const checkID = (rule, value, callback) => {\n            if (!value) {\n                return callback(new Error('学号不能为空'));\n            }\n            let regPos = /[0-9]/;\n            if (!regPos.test(value)) {\n                callback(new Error('请输入学号'));\n            } else {\n                if (value.length !== 12) {\n                    callback(new Error('学号必须为12位'));\n                } else {\n                    callback();\n                }\n            }\n        };\n        const validatePass = (rule, value, callback) => {\n            if (value === '') {\n                callback(new Error('请输入密码'));\n            } else {\n                callback();\n            }\n        };\n        return {\n            isLogin: false,\n            User: {\n                // name: '张三',\n                StudentID: '202034340099',\n                Password: ''\n            },\n            loginDialog: false,\n            rules: {\n                StudentID: [\n                    {validator: checkID, trigger: 'blur'}\n                ],\n                Password: [\n                    {validator: validatePass, trigger: 'blur'}\n                ],\n            }\n        }\n    },\n    methods: {\n        login() {\n            request.post(\"http://localhost:6679/login\", this.User).then(res => {\n                if (res.data.code === 0) {\n                    this.$message.success('登陆成功！');\n                    // let userInfo = {\n                    //     isLogin: true,\n                    //     manage: true,\n                    //     userID: this.User.StudentID,\n                    //     name: this.name\n                    // }\n                    // window.localStorage.setItem(\"userInfo\", JSON.stringify(userInfo));\n                    // this.$store.state.userInfo = userInfo;\n\n                    let token = res.data.token;\n                    window.localStorage.setItem(\"token\", token);\n                    this.$router.push('/main');\n                } else {\n                    this.$message({\n                        type: \"error\",\n                        message: \"登陆失败\"\n                    })\n                }\n            })\n        }\n    }\n}\n</script>\n\n<style scoped>\n/deep/ .el-form-item__error {\n    color: #F56C6C;\n    font-size: 18px;\n    line-height: 1;\n    padding-top: 4px;\n    position: absolute;\n    top: 100%;\n    left: 4em;\n}\n\n.btn {\n    width: 95%;\n    height: 2.7em;\n    font-size: 1.5em;\n    border-radius: 5px;\n}\n\n.header {\n    text-align: center;\n    font-size: 50px;\n    color: #fafafa;\n    position: relative;\n    top: 6%;\n}\n\n/*.login {*/\n/*  position: absolute;*/\n/*  top: 50%;*/\n/*  left: 50%;*/\n/*  margin: -150px 0 0 -150px;*/\n/*  width:300px;*/\n/*  height:300px;*/\n/*}*/\n\n/deep/ .el-form-item__label {\n    font-size: 22px;\n    width: 3em\n}\n\n/deep/ .el-input__inner {\n    font-size: 22px;\n    height: 50px;\n    line-height: 50px;\n}\n\n.el-form {\n    width: 20vw;\n    margin: 8vh auto;\n    padding: 3em 2em 1em 2em;\n    background: #fafafa;\n    border: 1px solid #ebebeb;\n    box-shadow: rgba(0, 0, 0, 0.14902) 0 1px 1px 0, rgba(0, 0, 0, 0.09804) 0 1px 2px 0;\n    font-size: 20px;\n    border-radius: 10px;\n}\n\n.el-form-item {\n    margin-bottom: 2em;\n    margin-top: 2em;\n}\n\n.el-input {\n    width: 80%;\n}\n\n.el-main {\n    color: #333;\n    text-align: center;\n    line-height: 160px;\n    width: 50%;\n    height: 100vh;\n    /*background: #eee;*/\n    -webkit-font-smoothing: antialiased;\n\n    /*width: 100%;*/\n    /*height:100%;*/\n    font-family: 'Open Sans', sans-serif;\n    background: #092756;\n    background: -moz-radial-gradient(0% 100%, ellipse cover, rgba(104, 128, 138, .4) 10%, rgba(138, 114, 76, 0) 40%), -moz-linear-gradient(top, rgba(57, 173, 219, .25) 0%, rgba(42, 60, 87, .4) 100%), -moz-linear-gradient(-45deg, #670d10 0%, #092756 100%);\n    background: -webkit-radial-gradient(0% 100%, ellipse cover, rgba(104, 128, 138, .4) 10%, rgba(138, 114, 76, 0) 40%), -webkit-linear-gradient(top, rgba(57, 173, 219, .25) 0%, rgba(42, 60, 87, .4) 100%), -webkit-linear-gradient(-45deg, #670d10 0%, #092756 100%);\n    background: -o-radial-gradient(0% 100%, ellipse cover, rgba(104, 128, 138, .4) 10%, rgba(138, 114, 76, 0) 40%), -o-linear-gradient(top, rgba(57, 173, 219, .25) 0%, rgba(42, 60, 87, .4) 100%), -o-linear-gradient(-45deg, #670d10 0%, #092756 100%);\n    background: -ms-radial-gradient(0% 100%, ellipse cover, rgba(104, 128, 138, .4) 10%, rgba(138, 114, 76, 0) 40%), -ms-linear-gradient(top, rgba(57, 173, 219, .25) 0%, rgba(42, 60, 87, .4) 100%), -ms-linear-gradient(-45deg, #670d10 0%, #092756 100%);\n    background: -webkit-radial-gradient(0% 100%, ellipse cover, rgba(104, 128, 138, .4) 10%, rgba(138, 114, 76, 0) 40%), linear-gradient(to bottom, rgba(57, 173, 219, .25) 0%, rgba(42, 60, 87, .4) 100%), linear-gradient(135deg, #670d10 0%, #092756 100%);\n    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#3E1D6D', endColorstr='#092756', GradientType=1);\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport Style from './Style';\nimport { resizeImgSize, asyncRun } from './utils';\nimport { Image, SVG, Circle, A, G, Rect, Text } from '@svgdotjs/svg.js';\nimport btnsSvg from './svg/btns';\nimport iconsSvg from './svg/icons';\n/** \n * javascript comment \n * @Author: 王林25 \n * @Date: 2021-04-06 11:26:00 \n * @Desc: 节点类\n */\n\nclass Node {\n  /** \n   * javascript comment \n   * @Author: 王林25 \n   * @Date: 2021-04-06 11:26:17 \n   * @Desc: 构造函数 \n   */\n  constructor(opt = {}) {\n    // 节点数据\n    this.nodeData = this.handleData(opt.data || {}); // id\n\n    this.uid = opt.uid; // 控制实例\n\n    this.mindMap = opt.mindMap; // 渲染实例\n\n    this.renderer = opt.renderer; // 渲染器\n\n    this.draw = opt.draw || null; // 主题配置\n\n    this.themeConfig = this.mindMap.themeConfig; // 样式实例\n\n    this.style = new Style(this, this.themeConfig); // 是否是根节点\n\n    this.isRoot = opt.isRoot === undefined ? false : opt.isRoot; // 是否是概要节点\n\n    this.isGeneralization = opt.isGeneralization === undefined ? false : opt.isGeneralization;\n    this.generalizationBelongNode = null; //是否是解释结点\n\n    this.isExplainNode = false;\n    this.ableToClick = false; // 节点层级\n\n    this.layerIndex = opt.layerIndex === undefined ? 0 : opt.layerIndex; // 节点宽\n\n    this.width = opt.width || 0; // 节点高\n\n    this.height = opt.height || 0; // left\n\n    this._left = opt.left || 0; // top\n\n    this._top = opt.top || 0; // 自定义位置\n\n    this.customLeft = opt.data.data.customLeft || undefined;\n    this.customTop = opt.data.data.customTop || undefined; // 是否正在拖拽中\n\n    this.isDrag = false; // 父节点\n\n    this.parent = opt.parent || null; // 子节点\n\n    this.children = opt.children || []; // 节点内容的容器\n\n    this.group = null; // 节点内容对象\n\n    this._imgData = null;\n    this._iconData = null;\n    this._textData = null;\n    this._hyperlinkData = null;\n    this._tagData = null;\n    this._noteData = null;\n    this.noteEl = null;\n    this._expandBtn = null;\n    this._lines = [];\n    this._generalizationLine = null;\n    this._generalizationNode = null; // 尺寸信息\n\n    this._rectInfo = {\n      imgContentWidth: 0,\n      imgContentHeight: 0,\n      textContentWidth: 0,\n      textContentHeight: 0\n    }; // 概要节点的宽高\n\n    this._generalizationNodeWidth = 0;\n    this._generalizationNodeHeight = 0; // 各种文字信息的间距\n\n    this.textContentItemMargin = this.mindMap.opt.textContentMargin; // 图片和文字节点的间距\n\n    this.blockContentMargin = this.mindMap.opt.imgTextMargin; // 展开收缩按钮尺寸\n\n    this.expandBtnSize = this.mindMap.opt.expandBtnSize; // 初始渲染\n\n    this.initRender = true; // 初始化\n    // this.createNodeData()\n\n    this.getSize();\n  } // 支持自定义位置\n\n\n  get left() {\n    return this.customLeft || this._left;\n  }\n\n  set left(val) {\n    this._left = val;\n  }\n\n  get top() {\n    return this.customTop || this._top;\n  }\n\n  set top(val) {\n    this._top = val;\n  }\n  /** \n   * @Author: 王林 \n   * @Date: 2021-07-12 07:40:47 \n   * @Desc: 更新主题配置 \n   */\n\n\n  updateThemeConfig() {\n    // 主题配置\n    this.themeConfig = this.mindMap.themeConfig; // 样式实例\n\n    this.style.updateThemeConfig(this.themeConfig);\n  }\n  /** \n   * @Author: 王林 \n   * @Date: 2021-07-05 23:11:39 \n   * @Desc: 复位部分布局时会重新设置的数据 \n   */\n\n\n  reset() {\n    this.children = [];\n    this.parent = null;\n    this.isRoot = false;\n    this.layerIndex = 0;\n    this.left = 0;\n    this.top = 0;\n  }\n  /** \n   * @Author: 王林 \n   * @Date: 2021-06-20 10:12:31 \n   * @Desc: 处理数据 \n   */\n\n\n  handleData(data) {\n    data.data.expand = data.data.expand === false ? false : true;\n    data.data.isActive = data.data.isActive === true ? true : false;\n    data.children = data.children || [];\n    return data;\n  }\n  /** \n   * javascript comment \n   * @Author: 王林25 \n   * @Date: 2022-08-02 19:53:40 \n   * @Desc: 检查节点是否存在自定义数据 \n   */\n\n\n  hasCustomPosition() {\n    return this.customLeft !== undefined && this.customTop !== undefined;\n  }\n  /** \n   * javascript comment \n   * @Author: 王林25 \n   * @Date: 2022-08-04 09:06:56 \n   * @Desc: 检查节点是否存在自定义位置的祖先节点 \n   */\n\n\n  ancestorHasCustomPosition() {\n    let node = this;\n\n    while (node) {\n      if (node.hasCustomPosition()) {\n        return true;\n      }\n\n      node = node.parent;\n    }\n\n    return false;\n  }\n  /** \n   * javascript comment \n   * @Author: 王林25 \n   * @Date: 2021-04-06 15:55:04 \n   * @Desc: 添加子节点 \n   */\n\n\n  addChildren(node) {\n    this.children.push(node);\n  }\n  /** \n   * @Author: 王林 \n   * @Date: 2021-07-06 22:08:09 \n   * @Desc: 创建节点的各个内容对象数据\n   */\n\n\n  createNodeData() {\n    this._imgData = this.createImgNode();\n    this._iconData = this.createIconNode();\n    this._textData = this.createTextNode();\n    this._hyperlinkData = this.createHyperlinkNode();\n    this._tagData = this.createTagNode();\n    this._noteData = this.createNoteNode();\n    this.createGeneralizationNode();\n  }\n  /** \n   * @Author: 王林 \n   * @Date: 2021-07-10 09:20:02 \n   * @Desc: 解绑所有事件 \n   */\n\n\n  removeAllEvent() {\n    if (this._noteData) {\n      this._noteData.node.off(['mouseover', 'mouseout']);\n    }\n\n    if (this._expandBtn) {\n      this._expandBtn.off(['mouseover', 'mouseout', 'click']);\n    }\n\n    if (this.group) {\n      this.group.off(['click', 'dblclick', 'contextmenu', 'mousedown', 'mouseup']);\n    }\n  }\n  /** \n   * @Author: 王林 \n   * @Date: 2021-07-07 21:27:24 \n   * @Desc: 移除节点内容\n   */\n\n\n  removeAllNode() {\n    // 节点内的内容\n    ;\n    [this._imgData, this._iconData, this._textData, this._hyperlinkData, this._tagData, this._noteData].forEach(item => {\n      if (item && item.node) item.node.remove();\n    });\n    this._imgData = null;\n    this._iconData = null;\n    this._textData = null;\n    this._hyperlinkData = null;\n    this._tagData = null;\n    this._noteData = null; // 展开收缩按钮\n\n    if (this._expandBtn) {\n      this._expandBtn.remove();\n\n      this._expandBtn = null;\n    } // 组\n\n\n    if (this.group) {\n      this.group.clear();\n      this.group.remove();\n      this.group = null;\n    } // 概要\n\n\n    this.removeGeneralization();\n  }\n  /** \n   * javascript comment \n   * @Author: 王林25 \n   * @Date: 2021-04-09 09:46:23 \n   * @Desc: 计算节点的宽高 \n   */\n\n\n  getSize() {\n    this.removeAllNode();\n    this.createNodeData();\n    let {\n      width,\n      height\n    } = this.getNodeRect(); // 判断节点尺寸是否有变化\n\n    let changed = this.width !== width || this.height !== height;\n    this.width = width;\n    this.height = height;\n    return changed;\n  }\n  /** \n   * javascript comment \n   * @Author: 王林25 \n   * @Date: 2021-04-06 14:52:17 \n   * @Desc: 计算节点尺寸信息 \n   */\n\n\n  getNodeRect() {\n    // 宽高\n    let imgContentWidth = 0;\n    let imgContentHeight = 0;\n    let textContentWidth = 0;\n    let textContentHeight = 0; // 存在图片\n\n    if (this._imgData) {\n      this._rectInfo.imgContentWidth = imgContentWidth = this._imgData.width;\n      this._rectInfo.imgContentHeight = imgContentHeight = this._imgData.height;\n    } // 图标\n\n\n    if (this._iconData.length > 0) {\n      textContentWidth += this._iconData.reduce((sum, cur) => {\n        textContentHeight = Math.max(textContentHeight, cur.height);\n        return sum += cur.width + this.textContentItemMargin;\n      }, 0);\n    } // 文字\n\n\n    if (this._textData) {\n      textContentWidth += this._textData.width;\n      textContentHeight = Math.max(textContentHeight, this._textData.height);\n    } // 超链接\n\n\n    if (this._hyperlinkData) {\n      textContentWidth += this._hyperlinkData.width;\n      textContentHeight = Math.max(textContentHeight, this._hyperlinkData.height);\n    } // 标签\n\n\n    if (this._tagData.length > 0) {\n      textContentWidth += this._tagData.reduce((sum, cur) => {\n        textContentHeight = Math.max(textContentHeight, cur.height);\n        return sum += cur.width + this.textContentItemMargin;\n      }, 0);\n    } // 备注\n\n\n    if (this._noteData) {\n      textContentWidth += this._noteData.width;\n      textContentHeight = Math.max(textContentHeight, this._noteData.height);\n    } // 文字内容部分的尺寸\n\n\n    this._rectInfo.textContentWidth = textContentWidth;\n    this._rectInfo.textContentHeight = textContentHeight; // 间距\n\n    let margin = imgContentHeight > 0 && textContentHeight > 0 ? this.blockContentMargin : 0;\n    let {\n      paddingX,\n      paddingY\n    } = this.getPaddingVale();\n    return {\n      width: Math.max(imgContentWidth, textContentWidth) + paddingX * 2,\n      height: imgContentHeight + textContentHeight + paddingY * 2 + margin\n    };\n  }\n  /** \n   * javascript comment \n   * @Author: 王林25 \n   * @Date: 2021-04-09 14:06:17 \n   * @Desc: 创建图片节点 \n   */\n\n\n  createImgNode() {\n    let img = this.nodeData.data.image;\n\n    if (!img) {\n      return;\n    }\n\n    let imgSize = this.getImgShowSize();\n    let node = new Image().load(img).size(...imgSize);\n\n    if (this.nodeData.data.imageTitle) {\n      node.attr('title', this.nodeData.data.imageTitle);\n    }\n\n    return {\n      node,\n      width: imgSize[0],\n      height: imgSize[1]\n    };\n  }\n  /** \n   * javascript comment \n   * @Author: 王林25 \n   * @Date: 2021-04-09 10:12:51 \n   * @Desc: 获取图片显示宽高 \n   */\n\n\n  getImgShowSize() {\n    return resizeImgSize(this.nodeData.data.imageSize.width, this.nodeData.data.imageSize.height, this.themeConfig.imgMaxWidth, this.themeConfig.imgMaxHeight);\n  }\n  /** \n   * javascript comment \n   * @Author: 王林25 \n   * @Date: 2021-04-09 14:10:48 \n   * @Desc: 创建icon节点 \n   */\n\n\n  createIconNode() {\n    let _data = this.nodeData.data;\n\n    if (!_data.icon || _data.icon.length <= 0) {\n      return [];\n    }\n\n    let iconSize = this.themeConfig.iconSize;\n    return _data.icon.map(item => {\n      return {\n        node: SVG(iconsSvg.getNodeIconListIcon(item)).size(iconSize, iconSize),\n        width: iconSize,\n        height: iconSize\n      };\n    });\n  }\n  /** \n   * javascript comment \n   * @Author: 王林25 \n   * @Date: 2021-04-09 14:08:56 \n   * @Desc: 创建文本节点 \n   */\n\n\n  createTextNode() {\n    let g = new G();\n    let fontSize = this.getStyle('fontSize', this.isRoot, this.nodeData.data.isActive);\n    let lineHeight = this.getStyle('lineHeight', this.isRoot, this.nodeData.data.isActive);\n    this.nodeData.data.text.split(/\\n/img).forEach((item, index) => {\n      let node = new Text().text(item);\n      this.style.text(node);\n      node.y(fontSize * lineHeight * index);\n      g.add(node);\n    });\n    let {\n      width,\n      height\n    } = g.bbox();\n    return {\n      node: g,\n      width,\n      height\n    };\n  }\n  /** \n   * @Author: 王林 \n   * @Date: 2021-06-20 15:28:54 \n   * @Desc: 创建超链接节点 \n   */\n\n\n  createHyperlinkNode() {\n    let {\n      hyperlink,\n      hyperlinkTitle\n    } = this.nodeData.data;\n\n    if (!hyperlink) {\n      return;\n    }\n\n    let iconSize = this.themeConfig.iconSize;\n    let node = new SVG(); // 超链接节点\n\n    let a = new A().to(hyperlink).target('_blank');\n    a.node.addEventListener('click', e => {\n      e.stopPropagation();\n    });\n\n    if (hyperlinkTitle) {\n      a.attr('title', hyperlinkTitle);\n    } // 添加一个透明的层，作为鼠标区域\n\n\n    a.rect(iconSize, iconSize).fill({\n      color: 'transparent'\n    }); // 超链接图标\n\n    let iconNode = SVG(iconsSvg.hyperlink).size(iconSize, iconSize);\n    this.style.iconNode(iconNode);\n    a.add(iconNode);\n    node.add(a);\n    return {\n      node,\n      width: iconSize,\n      height: iconSize\n    };\n  }\n  /** \n   * @Author: 王林 \n   * @Date: 2021-06-20 19:49:15 \n   * @Desc: 创建标签节点 \n   */\n\n\n  createTagNode() {\n    let tagData = this.nodeData.data.tag;\n\n    if (!tagData || tagData.length <= 0) {\n      return [];\n    }\n\n    let nodes = [];\n    tagData.slice(0, this.mindMap.opt.maxTag).forEach((item, index) => {\n      let tag = new G(); // 标签文本\n\n      let text = new Text().text(item).x(8).cy(10);\n      this.style.tagText(text, index);\n      let {\n        width,\n        height\n      } = text.bbox(); // 标签矩形\n\n      let rect = new Rect().size(width + 16, 20);\n      this.style.tagRect(rect, index);\n      tag.add(rect).add(text);\n      nodes.push({\n        node: tag,\n        width: width + 16,\n        height: 20\n      });\n    });\n    return nodes;\n  }\n  /** \n   * @Author: 王林 \n   * @Date: 2021-06-20 21:19:36 \n   * @Desc: 创建备注节点 \n   */\n\n\n  createNoteNode() {\n    if (!this.nodeData.data.note) {\n      return null;\n    }\n\n    let iconSize = this.themeConfig.iconSize;\n    let node = new SVG().attr('cursor', 'pointer'); // 透明的层，用来作为鼠标区域\n\n    node.add(new Rect().size(iconSize, iconSize).fill({\n      color: 'transparent'\n    })); // 备注图标\n\n    let iconNode = SVG(iconsSvg.note).size(iconSize, iconSize);\n    this.style.iconNode(iconNode);\n    node.add(iconNode); // 备注tooltip\n\n    if (!this.mindMap.opt.customNoteContentShow) {\n      if (!this.noteEl) {\n        this.noteEl = document.createElement('div');\n        this.noteEl.style.cssText = `\n                    position: absolute;\n                    padding: 10px;\n                    border-radius: 5px;\n                    box-shadow: 0 2px 5px rgb(0 0 0 / 10%);\n                    display: none;\n                    background-color: #fff;\n                `;\n        document.body.appendChild(this.noteEl);\n      }\n\n      this.noteEl.innerText = this.nodeData.data.note;\n    }\n\n    node.on('mouseover', () => {\n      let {\n        left,\n        top\n      } = node.node.getBoundingClientRect();\n\n      if (!this.mindMap.opt.customNoteContentShow) {\n        this.noteEl.style.left = left + 'px';\n        this.noteEl.style.top = top + iconSize + 'px';\n        this.noteEl.style.display = 'block';\n      } else {\n        this.mindMap.opt.customNoteContentShow.show(this.nodeData.data.note, left, top + iconSize);\n      }\n    });\n    node.on('mouseout', () => {\n      if (!this.mindMap.opt.customNoteContentShow) {\n        this.noteEl.style.display = 'none';\n      } else {\n        this.mindMap.opt.customNoteContentShow.hide();\n      }\n    });\n    return {\n      node,\n      width: iconSize,\n      height: iconSize\n    };\n  }\n  /** \n   * javascript comment \n   * @Author: 王林25 \n   * @Date: 2021-04-09 11:10:11 \n   * @Desc: 定位节点内容\n   */\n\n\n  layout() {\n    let {\n      width,\n      height,\n      textContentItemMargin\n    } = this;\n    let {\n      paddingY\n    } = this.getPaddingVale(); // 创建组\n\n    this.group = new G(); // 概要节点添加一个带所属节点id的类名\n\n    if (this.isGeneralization && this.generalizationBelongNode) {\n      this.group.addClass('generalization_' + this.generalizationBelongNode.uid);\n    }\n\n    this.draw.add(this.group);\n    this.update(true); // 节点矩形\n\n    this.style.rect(this.group.rect(width, height), this.isExplainNode); // 图片节点\n\n    let imgHeight = 0;\n\n    if (this._imgData) {\n      imgHeight = this._imgData.height;\n      this.group.add(this._imgData.node);\n\n      this._imgData.node.cx(width / 2).y(paddingY);\n    } // 内容节点\n\n\n    let textContentNested = new G();\n    let textContentOffsetX = 0; // icon\n\n    let iconNested = new G();\n\n    if (this._iconData && this._iconData.length > 0) {\n      let iconLeft = 0;\n\n      this._iconData.forEach(item => {\n        item.node.x(textContentOffsetX + iconLeft).y((this._rectInfo.textContentHeight - item.height) / 2);\n        iconNested.add(item.node);\n        iconLeft += item.width + textContentItemMargin;\n      });\n\n      textContentNested.add(iconNested);\n      textContentOffsetX += iconLeft;\n    } // 文字\n\n\n    if (this._textData) {\n      this._textData.node.x(textContentOffsetX).y(0);\n\n      textContentNested.add(this._textData.node);\n      textContentOffsetX += this._textData.width + textContentItemMargin;\n    } // 超链接\n\n\n    if (this._hyperlinkData) {\n      this._hyperlinkData.node.x(textContentOffsetX).y((this._rectInfo.textContentHeight - this._hyperlinkData.height) / 2);\n\n      textContentNested.add(this._hyperlinkData.node);\n      textContentOffsetX += this._hyperlinkData.width + textContentItemMargin;\n    } // 标签\n\n\n    let tagNested = new G();\n\n    if (this._tagData && this._tagData.length > 0) {\n      let tagLeft = 0;\n\n      this._tagData.forEach(item => {\n        item.node.x(textContentOffsetX + tagLeft).y((this._rectInfo.textContentHeight - item.height) / 2);\n        tagNested.add(item.node);\n        tagLeft += item.width + textContentItemMargin;\n      });\n\n      textContentNested.add(tagNested);\n      textContentOffsetX += tagLeft;\n    } // 备注\n\n\n    if (this._noteData) {\n      this._noteData.node.x(textContentOffsetX).y((this._rectInfo.textContentHeight - this._noteData.height) / 2);\n\n      textContentNested.add(this._noteData.node);\n      textContentOffsetX += this._noteData.width;\n    } // 文字内容整体\n\n\n    textContentNested.translate(width / 2 - textContentNested.bbox().width / 2, imgHeight + paddingY + (imgHeight > 0 && this._rectInfo.textContentHeight > 0 ? this.blockContentMargin : 0));\n    this.group.add(textContentNested); // 单击事件，选中节点\n\n    this.group.on('click', e => {\n      this.mindMap.emit('node_click', this, e);\n      this.active(e);\n    });\n    this.group.on('mousedown', e => {\n      e.stopPropagation();\n      this.mindMap.emit('node_mousedown', this, e);\n    });\n    this.group.on('mouseup', e => {\n      e.stopPropagation();\n      this.mindMap.emit('node_mouseup', this, e);\n    }); // 双击事件\n\n    this.group.on('dblclick', e => {\n      if (this.mindMap.opt.readonly) {\n        return;\n      }\n\n      e.stopPropagation();\n      this.mindMap.emit('node_dblclick', this, e);\n    }); // 右键菜单事件\n\n    this.group.on('contextmenu', e => {\n      if (this.mindMap.opt.readonly || this.isGeneralization) {\n        return;\n      }\n\n      e.stopPropagation();\n      e.preventDefault();\n\n      if (this.nodeData.data.isActive) {\n        this.renderer.clearActive();\n      }\n\n      this.active(e);\n      this.mindMap.emit('node_contextmenu', e, this);\n    });\n  }\n  /** \n   * @Author: 王林 \n   * @Date: 2021-07-10 16:44:22 \n   * @Desc: 激活节点 \n   */\n\n\n  active(e) {\n    if (this.mindMap.opt.readonly) {\n      return;\n    }\n\n    e.stopPropagation();\n\n    if (this.nodeData.data.isActive) {\n      return;\n    }\n\n    this.mindMap.emit('before_node_active', this, this.renderer.activeNodeList);\n    this.renderer.clearActive();\n    this.mindMap.execCommand('SET_NODE_ACTIVE', this, true);\n    this.renderer.addActiveNode(this);\n    this.mindMap.emit('node_active', this, this.renderer.activeNodeList);\n  }\n  /** \n   * @Author: 王林 \n   * @Date: 2021-07-04 20:20:09 \n   * @Desc: 渲染节点到画布，会移除旧的，创建新的\n   */\n\n\n  renderNode() {\n    this.removeAllEvent();\n    this.removeAllNode();\n    this.createNodeData();\n    this.layout();\n  }\n  /** \n   * @Author: 王林 \n   * @Date: 2021-07-04 22:47:01 \n   * @Desc: 更新节点\n   */\n\n\n  update(layout = false) {\n    if (!this.group) {\n      return;\n    } // 需要移除展开收缩按钮\n\n\n    if (this._expandBtn && this.nodeData.children.length <= 0) {\n      this.removeExpandBtn();\n    } else if (!this._expandBtn && this.nodeData.children.length > 0) {\n      // 需要添加展开收缩按钮\n      this.renderExpandBtn();\n    } else {\n      this.updateExpandBtnPos();\n    }\n\n    this.renderGeneralization();\n    let t = this.group.transform();\n\n    if (!layout) {\n      this.group.animate(300).translate(this.left - t.translateX, this.top - t.translateY);\n    } else {\n      this.group.translate(this.left - t.translateX, this.top - t.translateY);\n    }\n  }\n  /** \n   * javascript comment \n   * @Author: 王林25 \n   * @Date: 2021-04-07 13:55:58 \n   * @Desc: 递归渲染 \n   */\n\n\n  render() {\n    // 连线\n    this.renderLine(); // 节点\n\n    if (this.initRender) {\n      this.initRender = false;\n      this.renderNode();\n    } else {\n      this.update();\n    } // 子节点\n\n\n    if (this.children && this.children.length && this.nodeData.data.expand !== false) {\n      asyncRun(this.children.map(item => {\n        return () => {\n          item.render();\n        };\n      }));\n    }\n  }\n  /** \n   * @Author: 王林 \n   * @Date: 2021-07-10 09:24:55 \n   * @Desc: 递归删除 \n   */\n\n\n  remove() {\n    this.initRender = true;\n    this.removeAllEvent();\n    this.removeAllNode();\n    this.removeLine(); // 子节点\n\n    if (this.children && this.children.length) {\n      asyncRun(this.children.map(item => {\n        return () => {\n          item.remove();\n        };\n      }));\n    }\n  }\n  /** \n   * javascript comment \n   * @Author: 王林25 \n   * @Date: 2021-11-23 18:39:14 \n   * @Desc: 隐藏节点 \n   */\n\n\n  hide() {\n    this.group.hide();\n    this.hideGeneralization();\n\n    if (this.parent) {\n      let index = this.parent.children.indexOf(this);\n\n      this.parent._lines[index].hide();\n    } // 子节点\n\n\n    if (this.children && this.children.length) {\n      asyncRun(this.children.map(item => {\n        return () => {\n          item.hide();\n        };\n      }));\n    }\n  }\n  /** \n   * javascript comment \n   * @Author: 王林25 \n   * @Date: 2021-11-23 18:39:14 \n   * @Desc: 显示节点 \n   */\n\n\n  show() {\n    if (!this.group) {\n      return;\n    }\n\n    this.group.show();\n    this.showGeneralization();\n\n    if (this.parent) {\n      let index = this.parent.children.indexOf(this);\n\n      this.parent._lines[index].show();\n    } // 子节点\n\n\n    if (this.children && this.children.length) {\n      asyncRun(this.children.map(item => {\n        return () => {\n          item.show();\n        };\n      }));\n    }\n  }\n  /** \n   * @Author: 王林 \n   * @Date: 2021-04-10 22:01:53 \n   * @Desc: 连线 \n   */\n\n\n  renderLine() {\n    if (this.nodeData.data.expand === false) {\n      return;\n    }\n\n    let childrenLen = this.nodeData.children.length;\n\n    if (childrenLen > this._lines.length) {\n      // 创建缺少的线\n      new Array(childrenLen - this._lines.length).fill(0).forEach(() => {\n        this._lines.push(this.draw.path());\n      });\n    } else if (childrenLen < this._lines.length) {\n      // 删除多余的线\n      this._lines.slice(childrenLen).forEach(line => {\n        line.remove();\n      });\n\n      this._lines = this._lines.slice(0, childrenLen);\n    } // 画线\n\n\n    this.renderer.layout.renderLine(this, this._lines); // 添加样式\n\n    this._lines.forEach(line => {\n      this.style.line(line);\n    });\n  }\n  /** \n   * @Author: 王林 \n   * @Date: 2021-07-10 16:40:21 \n   * @Desc: 移除连线 \n   */\n\n\n  removeLine() {\n    this._lines.forEach(line => {\n      line.remove();\n    });\n\n    this._lines = [];\n  }\n  /** \n   * javascript comment \n   * @Author: 王林25 \n   * @Date: 2022-08-01 09:27:30 \n   * @Desc: 检查是否存在概要 \n   */\n\n\n  checkHasGeneralization() {\n    return !!this.nodeData.data.generalization;\n  }\n  /** \n   * @Author: 王林 \n   * @Date: 2022-07-31 09:41:28 \n   * @Desc: 创建概要节点 \n   */\n\n\n  createGeneralizationNode() {\n    if (this.isGeneralization || !this.checkHasGeneralization()) {\n      return;\n    }\n\n    if (!this._generalizationLine) {\n      this._generalizationLine = this.draw.path();\n    }\n\n    if (!this._generalizationNode) {\n      this._generalizationNode = new Node({\n        data: {\n          data: this.nodeData.data.generalization\n        },\n        uid: this.mindMap.uid++,\n        renderer: this.renderer,\n        mindMap: this.mindMap,\n        draw: this.draw,\n        isGeneralization: true\n      });\n      this._generalizationNodeWidth = this._generalizationNode.width;\n      this._generalizationNodeHeight = this._generalizationNode.height;\n      this._generalizationNode.generalizationBelongNode = this;\n\n      if (this.nodeData.data.generalization.isActive) {\n        this.renderer.addActiveNode(this._generalizationNode);\n      }\n    }\n  }\n  /** \n   * javascript comment \n   * @Author: 王林25 \n   * @Date: 2022-08-01 15:38:52 \n   * @Desc: 更新概要节点 \n   */\n\n\n  updateGeneralization() {\n    this.removeGeneralization();\n    this.createGeneralizationNode();\n  }\n  /** \n   * @Author: 王林 \n   * @Date: 2022-07-30 08:35:51 \n   * @Desc: 渲染概要节点 \n   */\n\n\n  renderGeneralization() {\n    if (this.isGeneralization) {\n      return;\n    }\n\n    if (!this.checkHasGeneralization()) {\n      this.removeGeneralization();\n      this._generalizationNodeWidth = 0;\n      this._generalizationNodeHeight = 0;\n      return;\n    }\n\n    if (this.nodeData.data.expand === false) {\n      this.removeGeneralization();\n      return;\n    }\n\n    this.createGeneralizationNode();\n    this.renderer.layout.renderGeneralization(this, this._generalizationLine, this._generalizationNode);\n    this.style.generalizationLine(this._generalizationLine);\n\n    this._generalizationNode.render();\n  }\n  /** \n   * @Author: 王林 \n   * @Date: 2022-07-30 13:11:27 \n   * @Desc: 删除概要节点 \n   */\n\n\n  removeGeneralization() {\n    if (this._generalizationLine) {\n      this._generalizationLine.remove();\n\n      this._generalizationLine = null;\n    }\n\n    if (this._generalizationNode) {\n      // 删除概要节点时要同步从激活节点里删除\n      this.renderer.removeActiveNode(this._generalizationNode);\n\n      this._generalizationNode.remove();\n\n      this._generalizationNode = null;\n    } // hack修复当激活一个节点时创建概要，然后立即激活创建的概要节点后会重复创建概要节点并且无法删除的问题\n\n\n    if (this.generalizationBelongNode) {\n      this.draw.find('.generalization_' + this.generalizationBelongNode.uid).remove();\n    }\n  }\n  /** \n   * javascript comment \n   * @Author: 王林25 \n   * @Date: 2022-08-01 09:56:46 \n   * @Desc: 隐藏概要节点 \n   */\n\n\n  hideGeneralization() {\n    if (this._generalizationLine) {\n      this._generalizationLine.hide();\n    }\n\n    if (this._generalizationNode) {\n      this._generalizationNode.hide();\n    }\n  }\n  /** \n   * javascript comment \n   * @Author: 王林25 \n   * @Date: 2022-08-01 09:57:42 \n   * @Desc: 显示概要节点 \n   */\n\n\n  showGeneralization() {\n    if (this._generalizationLine) {\n      this._generalizationLine.show();\n    }\n\n    if (this._generalizationNode) {\n      this._generalizationNode.show();\n    }\n  }\n  /** \n   * @Author: 王林 \n   * @Date: 2021-07-10 17:59:14 \n   * @Desc: 创建或更新展开收缩按钮内容 \n   */\n\n\n  updateExpandBtnNode() {\n    if (this._expandBtn) {\n      this._expandBtn.clear();\n    }\n\n    let iconSvg;\n\n    if (this.nodeData.data.expand === false) {\n      iconSvg = btnsSvg.open;\n    } else {\n      iconSvg = btnsSvg.close;\n    }\n\n    let node = SVG(iconSvg).size(this.expandBtnSize, this.expandBtnSize);\n    let fillNode = new Circle().size(this.expandBtnSize);\n    node.x(0).y(-this.expandBtnSize / 2);\n    fillNode.x(0).y(-this.expandBtnSize / 2);\n    this.style.iconBtn(node, fillNode);\n\n    this._expandBtn.add(fillNode).add(node);\n  }\n  /** \n   * javascript comment \n   * @Author: 王林25 \n   * @Date: 2021-07-12 18:18:13 \n   * @Desc: 更新展开收缩按钮位置 \n   */\n\n\n  updateExpandBtnPos() {\n    if (!this._expandBtn) {\n      return;\n    }\n\n    this.renderer.layout.renderExpandBtn(this, this._expandBtn);\n  }\n  /** \n   * @Author: 王林 \n   * @Date: 2021-04-11 19:47:01 \n   * @Desc: 展开收缩按钮 \n   */\n\n\n  renderExpandBtn() {\n    if (!this.nodeData.children || this.nodeData.children.length <= 0 || this.isRoot) {\n      return;\n    }\n\n    this._expandBtn = new G();\n    this.updateExpandBtnNode();\n\n    this._expandBtn.on('mouseover', e => {\n      e.stopPropagation();\n\n      this._expandBtn.css({\n        cursor: 'pointer'\n      });\n    });\n\n    this._expandBtn.on('mouseout', e => {\n      e.stopPropagation();\n\n      this._expandBtn.css({\n        cursor: 'auto'\n      });\n    });\n\n    this._expandBtn.on('click', e => {\n      e.stopPropagation(); // 展开收缩\n\n      this.mindMap.execCommand('SET_NODE_EXPAND', this, !this.nodeData.data.expand);\n      this.mindMap.emit('expand_btn_click', this);\n    });\n\n    this.group.add(this._expandBtn);\n    this.updateExpandBtnPos();\n  }\n  /** \n   * @Author: 王林 \n   * @Date: 2021-07-11 13:26:00 \n   * @Desc: 移除展开收缩按钮 \n   */\n\n\n  removeExpandBtn() {\n    if (this._expandBtn) {\n      this._expandBtn.off(['mouseover', 'mouseout', 'click']);\n\n      this._expandBtn.clear();\n\n      this._expandBtn.remove();\n\n      this._expandBtn = null;\n    }\n  }\n  /** \n   * javascript comment \n   * @Author: 王林25 \n   * @Date: 2021-11-25 09:51:37 \n   * @Desc: 检测当前节点是否是某个节点的祖先节点\n   */\n\n\n  isParent(node) {\n    if (this === node) {\n      return false;\n    }\n\n    let parent = node.parent;\n\n    while (parent) {\n      if (this === parent) {\n        return true;\n      }\n\n      parent = parent.parent;\n    }\n\n    return false;\n  }\n  /** \n   * javascript comment \n   * @Author: 王林25 \n   * @Date: 2021-11-25 10:32:34 \n   * @Desc: 检测当前节点是否是某个节点的兄弟节点\n   */\n\n\n  isBrother(node) {\n    if (!this.parent || this === node) {\n      return false;\n    }\n\n    return this.parent.children.find(item => {\n      return item === node;\n    });\n  }\n  /** \n   * @Author: 王林 \n   * @Date: 2021-06-20 22:51:57 \n   * @Desc: 获取padding值 \n   */\n\n\n  getPaddingVale() {\n    return {\n      paddingX: this.getStyle('paddingX', true, this.nodeData.data.isActive),\n      paddingY: this.getStyle('paddingY', true, this.nodeData.data.isActive)\n    };\n  }\n  /** \n   * @Author: 王林 \n   * @Date: 2021-05-04 21:48:49 \n   * @Desc: 获取某个样式 \n   */\n\n\n  getStyle(prop, root, isActive) {\n    let v = this.style.merge(prop, root, isActive);\n    return v === undefined ? '' : v;\n  }\n  /** \n   * @Author: 王林 \n   * @Date: 2021-05-04 22:18:07 \n   * @Desc: 修改某个样式 \n   */\n\n\n  setStyle(prop, value, isActive) {\n    this.mindMap.execCommand('SET_NODE_STYLE', this, prop, value, isActive);\n  }\n  /** \n   * @Author: 王林 \n   * @Date: 2021-06-22 22:04:02 \n   * @Desc: 获取数据 \n   */\n\n\n  getData(key) {\n    return key ? this.nodeData.data[key] || '' : this.nodeData.data;\n  }\n  /** \n   * @Author: 王林 \n   * @Date: 2021-06-22 22:12:01 \n   * @Desc: 设置数据 \n   */\n\n\n  setData(data = {}) {\n    this.mindMap.execCommand('SET_NODE_DATA', this, data);\n  }\n  /** \n   * @Author: 王林 \n   * @Date: 2021-07-10 08:41:28 \n   * @Desc: 设置文本 \n   */\n\n\n  setText(text) {\n    this.mindMap.execCommand('SET_NODE_TEXT', this, text);\n  }\n  /** \n   * @Author: 王林 \n   * @Date: 2021-07-10 08:42:19 \n   * @Desc: 设置图片 \n   */\n\n\n  setImage(imgData) {\n    this.mindMap.execCommand('SET_NODE_IMAGE', this, imgData);\n  }\n  /** \n   * @Author: 王林 \n   * @Date: 2021-07-10 08:47:29 \n   * @Desc: 设置图标 \n   */\n\n\n  setIcon(icons) {\n    this.mindMap.execCommand('SET_NODE_ICON', this, icons);\n  }\n  /** \n   * @Author: 王林 \n   * @Date: 2021-07-10 08:50:41 \n   * @Desc: 设置超链接 \n   */\n\n\n  setHyperlink(link, title) {\n    this.mindMap.execCommand('SET_NODE_HYPERLINK', this, link, title);\n  }\n  /** \n   * @Author: 王林 \n   * @Date: 2021-07-10 08:53:24 \n   * @Desc: 设置备注 \n   */\n\n\n  setNote(note) {\n    this.mindMap.execCommand('SET_NODE_NOTE', this, note);\n  }\n  /** \n   * @Author: 王林 \n   * @Date: 2021-07-10 08:55:08 \n   * @Desc: 设置标签 \n   */\n\n\n  setTag(tag) {\n    this.mindMap.execCommand('SET_NODE_TAG', this, tag);\n  }\n\n}\n\nexport default Node;","map":{"version":3,"names":["Style","resizeImgSize","asyncRun","Image","SVG","Circle","A","G","Rect","Text","btnsSvg","iconsSvg","Node","constructor","opt","nodeData","handleData","data","uid","mindMap","renderer","draw","themeConfig","style","isRoot","undefined","isGeneralization","generalizationBelongNode","isExplainNode","ableToClick","layerIndex","width","height","_left","left","_top","top","customLeft","customTop","isDrag","parent","children","group","_imgData","_iconData","_textData","_hyperlinkData","_tagData","_noteData","noteEl","_expandBtn","_lines","_generalizationLine","_generalizationNode","_rectInfo","imgContentWidth","imgContentHeight","textContentWidth","textContentHeight","_generalizationNodeWidth","_generalizationNodeHeight","textContentItemMargin","textContentMargin","blockContentMargin","imgTextMargin","expandBtnSize","initRender","getSize","val","updateThemeConfig","reset","expand","isActive","hasCustomPosition","ancestorHasCustomPosition","node","addChildren","push","createNodeData","createImgNode","createIconNode","createTextNode","createHyperlinkNode","createTagNode","createNoteNode","createGeneralizationNode","removeAllEvent","off","removeAllNode","forEach","item","remove","clear","removeGeneralization","getNodeRect","changed","length","reduce","sum","cur","Math","max","margin","paddingX","paddingY","getPaddingVale","img","image","imgSize","getImgShowSize","load","size","imageTitle","attr","imageSize","imgMaxWidth","imgMaxHeight","_data","icon","iconSize","map","getNodeIconListIcon","g","fontSize","getStyle","lineHeight","text","split","index","y","add","bbox","hyperlink","hyperlinkTitle","a","to","target","addEventListener","e","stopPropagation","rect","fill","color","iconNode","tagData","tag","nodes","slice","maxTag","x","cy","tagText","tagRect","note","customNoteContentShow","document","createElement","cssText","body","appendChild","innerText","on","getBoundingClientRect","display","show","hide","layout","addClass","update","imgHeight","cx","textContentNested","textContentOffsetX","iconNested","iconLeft","tagNested","tagLeft","translate","emit","active","readonly","preventDefault","clearActive","activeNodeList","execCommand","addActiveNode","renderNode","removeExpandBtn","renderExpandBtn","updateExpandBtnPos","renderGeneralization","t","transform","animate","translateX","translateY","render","renderLine","removeLine","hideGeneralization","indexOf","showGeneralization","childrenLen","Array","path","line","checkHasGeneralization","generalization","updateGeneralization","generalizationLine","removeActiveNode","find","updateExpandBtnNode","iconSvg","open","close","fillNode","iconBtn","css","cursor","isParent","isBrother","prop","root","v","merge","setStyle","value","getData","key","setData","setText","setImage","imgData","setIcon","icons","setHyperlink","link","title","setNote","setTag"],"sources":["D:/新建文件夹/git项目/GinTest/vue/node_modules/simple-mind-map/src/Node.js"],"sourcesContent":["import Style from './Style'\nimport {\n    resizeImgSize,\n    asyncRun\n} from './utils'\nimport {\n    Image,\n    SVG,\n    Circle,\n    A,\n    G,\n    Rect,\n    Text\n} from '@svgdotjs/svg.js'\nimport btnsSvg from './svg/btns'\nimport iconsSvg from './svg/icons'\n\n/** \n * javascript comment \n * @Author: 王林25 \n * @Date: 2021-04-06 11:26:00 \n * @Desc: 节点类\n */\nclass Node {\n    /** \n     * javascript comment \n     * @Author: 王林25 \n     * @Date: 2021-04-06 11:26:17 \n     * @Desc: 构造函数 \n     */\n    constructor(opt = {}) {\n        // 节点数据\n        this.nodeData = this.handleData(opt.data || {})\n        // id\n        this.uid = opt.uid\n        // 控制实例\n        this.mindMap = opt.mindMap\n        // 渲染实例\n        this.renderer = opt.renderer\n        // 渲染器\n        this.draw = opt.draw || null\n        // 主题配置\n        this.themeConfig = this.mindMap.themeConfig\n        // 样式实例\n        this.style = new Style(this, this.themeConfig)\n        // 是否是根节点\n        this.isRoot = opt.isRoot === undefined ? false : opt.isRoot\n        // 是否是概要节点\n        this.isGeneralization = opt.isGeneralization === undefined ? false : opt.isGeneralization\n        this.generalizationBelongNode = null\n        //是否是解释结点\n        this.isExplainNode = false\n        this.ableToClick = false\n        // 节点层级\n        this.layerIndex = opt.layerIndex === undefined ? 0 : opt.layerIndex\n        // 节点宽\n        this.width = opt.width || 0\n        // 节点高\n        this.height = opt.height || 0\n        // left\n        this._left = opt.left || 0\n        // top\n        this._top = opt.top || 0\n        // 自定义位置\n        this.customLeft = opt.data.data.customLeft || undefined\n        this.customTop = opt.data.data.customTop || undefined\n        // 是否正在拖拽中\n        this.isDrag = false\n        // 父节点\n        this.parent = opt.parent || null\n        // 子节点\n        this.children = opt.children || []\n        // 节点内容的容器\n        this.group = null\n        // 节点内容对象\n        this._imgData = null\n        this._iconData = null\n        this._textData = null\n        this._hyperlinkData = null\n        this._tagData = null\n        this._noteData = null\n        this.noteEl = null\n        this._expandBtn = null\n        this._lines = []\n        this._generalizationLine = null\n        this._generalizationNode = null\n        // 尺寸信息\n        this._rectInfo = {\n            imgContentWidth: 0,\n            imgContentHeight: 0,\n            textContentWidth: 0,\n            textContentHeight: 0\n        }\n        // 概要节点的宽高\n        this._generalizationNodeWidth = 0\n        this._generalizationNodeHeight = 0\n        // 各种文字信息的间距\n        this.textContentItemMargin = this.mindMap.opt.textContentMargin\n        // 图片和文字节点的间距\n        this.blockContentMargin = this.mindMap.opt.imgTextMargin\n        // 展开收缩按钮尺寸\n        this.expandBtnSize = this.mindMap.opt.expandBtnSize\n        // 初始渲染\n        this.initRender = true\n        // 初始化\n        // this.createNodeData()\n        this.getSize()\n    }\n\n    // 支持自定义位置\n    get left() {\n        return this.customLeft || this._left\n    }\n\n    set left(val) {\n        this._left = val\n    }\n\n    get top() {\n        return this.customTop || this._top\n    }\n\n    set top(val) {\n        this._top = val\n    }\n\n    /** \n     * @Author: 王林 \n     * @Date: 2021-07-12 07:40:47 \n     * @Desc: 更新主题配置 \n     */\n    updateThemeConfig() {\n        // 主题配置\n        this.themeConfig = this.mindMap.themeConfig\n        // 样式实例\n        this.style.updateThemeConfig(this.themeConfig)\n    }\n\n    /** \n     * @Author: 王林 \n     * @Date: 2021-07-05 23:11:39 \n     * @Desc: 复位部分布局时会重新设置的数据 \n     */\n    reset() {\n        this.children = []\n        this.parent = null\n        this.isRoot = false\n        this.layerIndex = 0\n        this.left = 0\n        this.top = 0\n    }\n\n    /** \n     * @Author: 王林 \n     * @Date: 2021-06-20 10:12:31 \n     * @Desc: 处理数据 \n     */\n    handleData(data) {\n        data.data.expand = data.data.expand === false ? false : true\n        data.data.isActive = data.data.isActive === true ? true : false\n        data.children = data.children || []\n        return data\n    }\n\n    /** \n     * javascript comment \n     * @Author: 王林25 \n     * @Date: 2022-08-02 19:53:40 \n     * @Desc: 检查节点是否存在自定义数据 \n     */\n    hasCustomPosition() {\n        return this.customLeft !== undefined && this.customTop !== undefined\n    }\n\n    /** \n     * javascript comment \n     * @Author: 王林25 \n     * @Date: 2022-08-04 09:06:56 \n     * @Desc: 检查节点是否存在自定义位置的祖先节点 \n     */\n    ancestorHasCustomPosition() {\n        let node = this\n        while(node) {\n            if (node.hasCustomPosition()) {\n                return true\n            }\n            node = node.parent\n        }\n        return false\n    }\n\n    /** \n     * javascript comment \n     * @Author: 王林25 \n     * @Date: 2021-04-06 15:55:04 \n     * @Desc: 添加子节点 \n     */\n    addChildren(node) {\n        this.children.push(node)\n    }\n\n    /** \n     * @Author: 王林 \n     * @Date: 2021-07-06 22:08:09 \n     * @Desc: 创建节点的各个内容对象数据\n     */\n    createNodeData() {\n        this._imgData = this.createImgNode()\n        this._iconData = this.createIconNode()\n        this._textData = this.createTextNode()\n        this._hyperlinkData = this.createHyperlinkNode()\n        this._tagData = this.createTagNode()\n        this._noteData = this.createNoteNode()\n        this.createGeneralizationNode()\n    }\n\n    /** \n     * @Author: 王林 \n     * @Date: 2021-07-10 09:20:02 \n     * @Desc: 解绑所有事件 \n     */\n    removeAllEvent() {\n        if (this._noteData) {\n            this._noteData.node.off(['mouseover', 'mouseout'])\n        }\n        if (this._expandBtn) {\n            this._expandBtn.off(['mouseover', 'mouseout', 'click'])\n        }\n        if (this.group) {\n            this.group.off(['click', 'dblclick', 'contextmenu', 'mousedown', 'mouseup'])\n        }\n    }\n\n    /** \n     * @Author: 王林 \n     * @Date: 2021-07-07 21:27:24 \n     * @Desc: 移除节点内容\n     */\n    removeAllNode() {\n        // 节点内的内容\n        ;[this._imgData, this._iconData, this._textData, this._hyperlinkData, this._tagData, this._noteData].forEach((item) => {\n            if (item && item.node) item.node.remove()\n        })\n        this._imgData = null\n        this._iconData = null\n        this._textData = null\n        this._hyperlinkData = null\n        this._tagData = null\n        this._noteData = null\n        // 展开收缩按钮\n        if (this._expandBtn) {\n            this._expandBtn.remove()\n            this._expandBtn = null\n        }\n        // 组\n        if (this.group) {\n            this.group.clear()\n            this.group.remove()\n            this.group = null\n        }\n        // 概要\n        this.removeGeneralization()\n    }\n\n    /** \n     * javascript comment \n     * @Author: 王林25 \n     * @Date: 2021-04-09 09:46:23 \n     * @Desc: 计算节点的宽高 \n     */\n    getSize() {\n        this.removeAllNode()\n        this.createNodeData()\n        let {\n            width,\n            height\n        } = this.getNodeRect()\n        // 判断节点尺寸是否有变化\n        let changed = this.width !== width || this.height !== height\n        this.width = width\n        this.height = height\n        return changed\n    }\n\n    /** \n     * javascript comment \n     * @Author: 王林25 \n     * @Date: 2021-04-06 14:52:17 \n     * @Desc: 计算节点尺寸信息 \n     */\n    getNodeRect() {\n        // 宽高\n        let imgContentWidth = 0\n        let imgContentHeight = 0\n        let textContentWidth = 0\n        let textContentHeight = 0\n        // 存在图片\n        if (this._imgData) {\n            this._rectInfo.imgContentWidth = imgContentWidth = this._imgData.width\n            this._rectInfo.imgContentHeight = imgContentHeight = this._imgData.height\n        }\n        // 图标\n        if (this._iconData.length > 0) {\n            textContentWidth += this._iconData.reduce((sum, cur) => {\n                textContentHeight = Math.max(textContentHeight, cur.height)\n                return sum += cur.width + this.textContentItemMargin\n            }, 0)\n        }\n        // 文字\n        if (this._textData) {\n            textContentWidth += this._textData.width\n            textContentHeight = Math.max(textContentHeight, this._textData.height)\n        }\n        // 超链接\n        if (this._hyperlinkData) {\n            textContentWidth += this._hyperlinkData.width\n            textContentHeight = Math.max(textContentHeight, this._hyperlinkData.height)\n        }\n        // 标签\n        if (this._tagData.length > 0) {\n            textContentWidth += this._tagData.reduce((sum, cur) => {\n                textContentHeight = Math.max(textContentHeight, cur.height)\n                return sum += cur.width + this.textContentItemMargin\n            }, 0)\n        }\n        // 备注\n        if (this._noteData) {\n            textContentWidth += this._noteData.width\n            textContentHeight = Math.max(textContentHeight, this._noteData.height)\n        }\n        // 文字内容部分的尺寸\n        this._rectInfo.textContentWidth = textContentWidth\n        this._rectInfo.textContentHeight = textContentHeight\n        // 间距\n        let margin = imgContentHeight > 0 && textContentHeight > 0 ? this.blockContentMargin : 0\n        let { paddingX, paddingY } = this.getPaddingVale()\n        return {\n            width: Math.max(imgContentWidth, textContentWidth) + paddingX * 2,\n            height: imgContentHeight + textContentHeight + paddingY * 2 + margin\n        }\n    }\n\n    /** \n     * javascript comment \n     * @Author: 王林25 \n     * @Date: 2021-04-09 14:06:17 \n     * @Desc: 创建图片节点 \n     */\n    createImgNode() {\n        let img = this.nodeData.data.image\n        if (!img) {\n            return\n        }\n        let imgSize = this.getImgShowSize()\n        let node = new Image().load(img).size(...imgSize)\n        if (this.nodeData.data.imageTitle) {\n            node.attr('title', this.nodeData.data.imageTitle)\n        }\n        return {\n            node,\n            width: imgSize[0],\n            height: imgSize[1]\n        }\n    }\n\n    /** \n     * javascript comment \n     * @Author: 王林25 \n     * @Date: 2021-04-09 10:12:51 \n     * @Desc: 获取图片显示宽高 \n     */\n    getImgShowSize() {\n        return resizeImgSize(this.nodeData.data.imageSize.width, this.nodeData.data.imageSize.height, this.themeConfig.imgMaxWidth, this.themeConfig.imgMaxHeight)\n    }\n\n    /** \n     * javascript comment \n     * @Author: 王林25 \n     * @Date: 2021-04-09 14:10:48 \n     * @Desc: 创建icon节点 \n     */\n    createIconNode() {\n        let _data = this.nodeData.data\n        if (!_data.icon || _data.icon.length <= 0) {\n            return []\n        }\n        let iconSize = this.themeConfig.iconSize\n        return _data.icon.map((item) => {\n            return {\n                node: SVG(iconsSvg.getNodeIconListIcon(item)).size(iconSize, iconSize),\n                width: iconSize,\n                height: iconSize\n            }\n        })\n    }\n\n    /** \n     * javascript comment \n     * @Author: 王林25 \n     * @Date: 2021-04-09 14:08:56 \n     * @Desc: 创建文本节点 \n     */\n    createTextNode() {\n        let g = new G()\n        let fontSize = this.getStyle('fontSize', this.isRoot, this.nodeData.data.isActive)\n        let lineHeight = this.getStyle('lineHeight', this.isRoot, this.nodeData.data.isActive)\n        this.nodeData.data.text.split(/\\n/img).forEach((item, index) => {\n            let node = new Text().text(item)\n            this.style.text(node)\n            node.y(fontSize * lineHeight * index)\n            g.add(node)\n        })\n        let {\n            width,\n            height\n        } = g.bbox()\n        return {\n            node: g,\n            width,\n            height\n        }\n    }\n\n    /** \n     * @Author: 王林 \n     * @Date: 2021-06-20 15:28:54 \n     * @Desc: 创建超链接节点 \n     */\n    createHyperlinkNode() {\n        let { hyperlink, hyperlinkTitle } = this.nodeData.data\n        if (!hyperlink) {\n            return\n        }\n        let iconSize = this.themeConfig.iconSize\n        let node = new SVG()\n        // 超链接节点\n        let a = new A().to(hyperlink).target('_blank')\n        a.node.addEventListener('click', (e) => {\n            e.stopPropagation()\n        })\n        if (hyperlinkTitle) {\n            a.attr('title', hyperlinkTitle)\n        }\n        // 添加一个透明的层，作为鼠标区域\n        a.rect(iconSize, iconSize).fill({ color: 'transparent' })\n        // 超链接图标\n        let iconNode = SVG(iconsSvg.hyperlink).size(iconSize, iconSize)\n        this.style.iconNode(iconNode)\n        a.add(iconNode)\n        node.add(a)\n        return {\n            node,\n            width: iconSize,\n            height: iconSize\n        }\n    }\n\n    /** \n     * @Author: 王林 \n     * @Date: 2021-06-20 19:49:15 \n     * @Desc: 创建标签节点 \n     */\n    createTagNode() {\n        let tagData = this.nodeData.data.tag\n        if (!tagData || tagData.length <= 0) {\n            return []\n        }\n        let nodes = []\n        tagData.slice(0, this.mindMap.opt.maxTag).forEach((item, index) => {\n            let tag = new G()\n            // 标签文本\n            let text = new Text().text(item).x(8).cy(10)\n            this.style.tagText(text, index)\n            let {\n                width,\n                height\n            } = text.bbox()\n            // 标签矩形\n            let rect = new Rect().size(width + 16, 20)\n            this.style.tagRect(rect, index)\n            tag.add(rect).add(text)\n            nodes.push({\n                node: tag,\n                width: width + 16,\n                height: 20\n            })\n        })\n        return nodes\n    }\n\n    /** \n     * @Author: 王林 \n     * @Date: 2021-06-20 21:19:36 \n     * @Desc: 创建备注节点 \n     */\n    createNoteNode() {\n        if (!this.nodeData.data.note) {\n            return null\n        }\n        let iconSize = this.themeConfig.iconSize\n        let node = new SVG().attr('cursor', 'pointer')\n        // 透明的层，用来作为鼠标区域\n        node.add(new Rect().size(iconSize, iconSize).fill({ color: 'transparent' }))\n        // 备注图标\n        let iconNode = SVG(iconsSvg.note).size(iconSize, iconSize)\n        this.style.iconNode(iconNode)\n        node.add(iconNode)\n        // 备注tooltip\n        if (!this.mindMap.opt.customNoteContentShow) {\n            if (!this.noteEl) {\n                this.noteEl = document.createElement('div')\n                this.noteEl.style.cssText = `\n                    position: absolute;\n                    padding: 10px;\n                    border-radius: 5px;\n                    box-shadow: 0 2px 5px rgb(0 0 0 / 10%);\n                    display: none;\n                    background-color: #fff;\n                `\n                document.body.appendChild(this.noteEl)\n            }\n            this.noteEl.innerText = this.nodeData.data.note\n        }\n        node.on('mouseover', () => {\n            let { left, top } = node.node.getBoundingClientRect()\n            if (!this.mindMap.opt.customNoteContentShow) {\n                this.noteEl.style.left = left + 'px'\n                this.noteEl.style.top = top + iconSize + 'px'\n                this.noteEl.style.display = 'block'\n            } else {\n                this.mindMap.opt.customNoteContentShow.show(this.nodeData.data.note, left, top + iconSize)\n            }\n        })\n        node.on('mouseout', () => {\n            if (!this.mindMap.opt.customNoteContentShow) {\n                this.noteEl.style.display = 'none'\n            } else {\n                this.mindMap.opt.customNoteContentShow.hide()\n            }\n        })\n        return {\n            node,\n            width: iconSize,\n            height: iconSize\n        }\n    }\n\n    /** \n     * javascript comment \n     * @Author: 王林25 \n     * @Date: 2021-04-09 11:10:11 \n     * @Desc: 定位节点内容\n     */\n    layout() {\n        let {\n            width,\n            height,\n            textContentItemMargin\n        } = this\n        let { paddingY } = this.getPaddingVale()\n        // 创建组\n        this.group = new G()\n        // 概要节点添加一个带所属节点id的类名\n        if (this.isGeneralization && this.generalizationBelongNode) {\n            this.group.addClass('generalization_' + this.generalizationBelongNode.uid)\n        }\n        this.draw.add(this.group)\n        this.update(true)\n        // 节点矩形\n        this.style.rect(this.group.rect(width, height),this.isExplainNode)\n        // 图片节点\n        let imgHeight = 0\n        if (this._imgData) {\n            imgHeight = this._imgData.height\n            this.group.add(this._imgData.node)\n            this._imgData.node.cx(width / 2).y(paddingY)\n        }\n        // 内容节点\n        let textContentNested = new G()\n        let textContentOffsetX = 0\n        // icon\n        let iconNested = new G()\n        if (this._iconData && this._iconData.length > 0) {\n            let iconLeft = 0\n            this._iconData.forEach((item) => {\n                item.node.x(textContentOffsetX + iconLeft).y((this._rectInfo.textContentHeight - item.height) / 2)\n                iconNested.add(item.node)\n                iconLeft += item.width + textContentItemMargin\n            })\n            textContentNested.add(iconNested)\n            textContentOffsetX += iconLeft\n        }\n        // 文字\n        if (this._textData) {\n            this._textData.node.x(textContentOffsetX).y(0)\n            textContentNested.add(this._textData.node)\n            textContentOffsetX += this._textData.width + textContentItemMargin\n        }\n        // 超链接\n        if (this._hyperlinkData) {\n            this._hyperlinkData.node.x(textContentOffsetX).y((this._rectInfo.textContentHeight - this._hyperlinkData.height) / 2)\n            textContentNested.add(this._hyperlinkData.node)\n            textContentOffsetX += this._hyperlinkData.width + textContentItemMargin\n        }\n        // 标签\n        let tagNested = new G()\n        if (this._tagData && this._tagData.length > 0) {\n            let tagLeft = 0\n            this._tagData.forEach((item) => {\n                item.node.x(textContentOffsetX + tagLeft).y((this._rectInfo.textContentHeight - item.height) / 2)\n                tagNested.add(item.node)\n                tagLeft += item.width + textContentItemMargin\n            })\n            textContentNested.add(tagNested)\n            textContentOffsetX += tagLeft\n        }\n        // 备注\n        if (this._noteData) {\n            this._noteData.node.x(textContentOffsetX).y((this._rectInfo.textContentHeight - this._noteData.height) / 2)\n            textContentNested.add(this._noteData.node)\n            textContentOffsetX += this._noteData.width\n        }\n        // 文字内容整体\n        textContentNested.translate(\n            width / 2 - textContentNested.bbox().width / 2,\n            imgHeight + paddingY + (imgHeight > 0 && this._rectInfo.textContentHeight > 0 ? this.blockContentMargin : 0)\n        )\n        this.group.add(textContentNested)\n        // 单击事件，选中节点\n        this.group.on('click', (e) => {\n            this.mindMap.emit('node_click', this, e)\n            this.active(e)\n        })\n        this.group.on('mousedown', (e) => {\n            e.stopPropagation()\n            this.mindMap.emit('node_mousedown', this, e)\n        })\n        this.group.on('mouseup', (e) => {\n            e.stopPropagation()\n            this.mindMap.emit('node_mouseup', this, e)\n        })\n        // 双击事件\n        this.group.on('dblclick', (e) => {\n            if (this.mindMap.opt.readonly) {\n                return\n            }\n            e.stopPropagation()\n            this.mindMap.emit('node_dblclick', this, e)\n        })\n        // 右键菜单事件\n        this.group.on('contextmenu', (e) => {\n            if (this.mindMap.opt.readonly || this.isGeneralization) {\n                return\n            }\n            e.stopPropagation()\n            e.preventDefault()\n            if (this.nodeData.data.isActive) {\n                this.renderer.clearActive()\n            }\n            this.active(e)\n            this.mindMap.emit('node_contextmenu', e, this)\n        })\n    }\n\n    /** \n     * @Author: 王林 \n     * @Date: 2021-07-10 16:44:22 \n     * @Desc: 激活节点 \n     */\n    active(e) {\n        if (this.mindMap.opt.readonly) {\n            return\n        }\n        e.stopPropagation()\n        if (this.nodeData.data.isActive) {\n            return\n        }\n        this.mindMap.emit('before_node_active', this, this.renderer.activeNodeList)\n        this.renderer.clearActive()\n        this.mindMap.execCommand('SET_NODE_ACTIVE', this, true)\n        this.renderer.addActiveNode(this)\n        this.mindMap.emit('node_active', this, this.renderer.activeNodeList)\n    }\n\n    /** \n     * @Author: 王林 \n     * @Date: 2021-07-04 20:20:09 \n     * @Desc: 渲染节点到画布，会移除旧的，创建新的\n     */\n    renderNode() {\n        this.removeAllEvent()\n        this.removeAllNode()\n        this.createNodeData()\n        this.layout()\n    }\n\n    /** \n     * @Author: 王林 \n     * @Date: 2021-07-04 22:47:01 \n     * @Desc: 更新节点\n     */\n    update(layout = false) {\n        if (!this.group) {\n            return\n        }\n        // 需要移除展开收缩按钮\n        if (this._expandBtn && this.nodeData.children.length <= 0) {\n            this.removeExpandBtn()\n        } else if (!this._expandBtn && this.nodeData.children.length > 0) {// 需要添加展开收缩按钮\n            this.renderExpandBtn()\n        } else {\n            this.updateExpandBtnPos()\n        }\n        this.renderGeneralization()\n        let t = this.group.transform()\n        if (!layout) {\n            this.group.animate(300).translate(this.left - t.translateX, this.top - t.translateY)\n        } else {\n            this.group.translate(this.left - t.translateX, this.top - t.translateY)\n        }\n    }\n\n    /** \n     * javascript comment \n     * @Author: 王林25 \n     * @Date: 2021-04-07 13:55:58 \n     * @Desc: 递归渲染 \n     */\n    render() {\n        // 连线\n        this.renderLine()\n        // 节点\n        if (this.initRender) {\n            this.initRender = false\n            this.renderNode()\n        } else {\n            this.update()\n        }\n        // 子节点\n        if (this.children && this.children.length && this.nodeData.data.expand !== false) {\n            asyncRun(this.children.map((item) => {\n                return () =>{\n                    item.render()\n                }\n            }))\n        }\n    }\n\n    /** \n     * @Author: 王林 \n     * @Date: 2021-07-10 09:24:55 \n     * @Desc: 递归删除 \n     */\n    remove() {\n        this.initRender = true\n        this.removeAllEvent()\n        this.removeAllNode()\n        this.removeLine()\n        // 子节点\n        if (this.children && this.children.length) {\n            asyncRun(this.children.map((item) => {\n                return () =>{\n                    item.remove()\n                }\n            }))\n        }\n    }\n\n    /** \n     * javascript comment \n     * @Author: 王林25 \n     * @Date: 2021-11-23 18:39:14 \n     * @Desc: 隐藏节点 \n     */\n    hide() {\n        this.group.hide()\n        this.hideGeneralization()\n        if (this.parent) {\n            let index = this.parent.children.indexOf(this)\n            this.parent._lines[index].hide()\n        }\n        // 子节点\n        if (this.children && this.children.length) {\n            asyncRun(this.children.map((item) => {\n                return () =>{\n                    item.hide()\n                }\n            }))\n        }\n    }\n\n    /** \n     * javascript comment \n     * @Author: 王林25 \n     * @Date: 2021-11-23 18:39:14 \n     * @Desc: 显示节点 \n     */\n    show() {\n        if (!this.group) {\n            return;\n        }\n        this.group.show()\n        this.showGeneralization()\n        if (this.parent) {\n            let index = this.parent.children.indexOf(this)\n            this.parent._lines[index].show()\n        }\n        // 子节点\n        if (this.children && this.children.length) {\n            asyncRun(this.children.map((item) => {\n                return () =>{\n                    item.show()\n                }\n            }))\n        }\n    }\n\n    /** \n     * @Author: 王林 \n     * @Date: 2021-04-10 22:01:53 \n     * @Desc: 连线 \n     */\n    renderLine() {\n        if (this.nodeData.data.expand === false) {\n            return\n        }\n        let childrenLen = this.nodeData.children.length\n        if (childrenLen > this._lines.length) {\n            // 创建缺少的线\n            new Array(childrenLen - this._lines.length).fill(0).forEach(() => {\n                this._lines.push(this.draw.path())\n            })\n        } else if (childrenLen < this._lines.length) {\n            // 删除多余的线\n            this._lines.slice(childrenLen).forEach((line) => {\n                line.remove()\n            })\n            this._lines = this._lines.slice(0, childrenLen)\n        }\n        // 画线\n        this.renderer.layout.renderLine(this, this._lines)\n        // 添加样式\n        this._lines.forEach((line) => {\n            this.style.line(line)\n        })\n    }\n\n    /** \n     * @Author: 王林 \n     * @Date: 2021-07-10 16:40:21 \n     * @Desc: 移除连线 \n     */\n    removeLine() {\n        this._lines.forEach((line) => {\n            line.remove()\n        })\n        this._lines = []\n    }\n\n    /** \n     * javascript comment \n     * @Author: 王林25 \n     * @Date: 2022-08-01 09:27:30 \n     * @Desc: 检查是否存在概要 \n     */\n    checkHasGeneralization() {\n        return !!this.nodeData.data.generalization\n    }\n\n    /** \n     * @Author: 王林 \n     * @Date: 2022-07-31 09:41:28 \n     * @Desc: 创建概要节点 \n     */\n    createGeneralizationNode() {\n        if (this.isGeneralization || !this.checkHasGeneralization()) {\n            return\n        }\n        if (!this._generalizationLine) {\n            this._generalizationLine = this.draw.path()\n        }\n        if (!this._generalizationNode) {\n            this._generalizationNode = new Node({\n                data: {\n                    data: this.nodeData.data.generalization\n                },\n                uid: this.mindMap.uid++,\n                renderer: this.renderer,\n                mindMap: this.mindMap,\n                draw: this.draw,\n                isGeneralization: true\n            })\n            this._generalizationNodeWidth = this._generalizationNode.width\n            this._generalizationNodeHeight = this._generalizationNode.height\n            this._generalizationNode.generalizationBelongNode = this\n            if (this.nodeData.data.generalization.isActive) {\n                this.renderer.addActiveNode(this._generalizationNode)\n            }\n        }\n    }\n\n    /** \n     * javascript comment \n     * @Author: 王林25 \n     * @Date: 2022-08-01 15:38:52 \n     * @Desc: 更新概要节点 \n     */\n    updateGeneralization() {\n        this.removeGeneralization()\n        this.createGeneralizationNode()\n    }\n\n    /** \n     * @Author: 王林 \n     * @Date: 2022-07-30 08:35:51 \n     * @Desc: 渲染概要节点 \n     */\n    renderGeneralization() {\n        if (this.isGeneralization) {\n            return\n        }\n        if (!this.checkHasGeneralization()) {\n            this.removeGeneralization()\n            this._generalizationNodeWidth = 0\n            this._generalizationNodeHeight = 0\n            return\n        }\n        if (this.nodeData.data.expand === false) {\n            this.removeGeneralization()\n            return\n        }\n        this.createGeneralizationNode()\n        this.renderer.layout.renderGeneralization(this, this._generalizationLine, this._generalizationNode)\n        this.style.generalizationLine(this._generalizationLine)\n        this._generalizationNode.render()\n    }\n\n    /** \n     * @Author: 王林 \n     * @Date: 2022-07-30 13:11:27 \n     * @Desc: 删除概要节点 \n     */\n    removeGeneralization() {\n        if (this._generalizationLine) {\n            this._generalizationLine.remove()\n            this._generalizationLine = null\n        }\n        if (this._generalizationNode) {\n            // 删除概要节点时要同步从激活节点里删除\n            this.renderer.removeActiveNode(this._generalizationNode)\n            this._generalizationNode.remove()\n            this._generalizationNode = null\n        }\n        // hack修复当激活一个节点时创建概要，然后立即激活创建的概要节点后会重复创建概要节点并且无法删除的问题\n        if (this.generalizationBelongNode) {\n            this.draw.find('.generalization_' + this.generalizationBelongNode.uid).remove()\n        }\n    }\n\n    /** \n     * javascript comment \n     * @Author: 王林25 \n     * @Date: 2022-08-01 09:56:46 \n     * @Desc: 隐藏概要节点 \n     */\n    hideGeneralization() {\n        if (this._generalizationLine) {\n            this._generalizationLine.hide()\n        }\n        if (this._generalizationNode) {\n            this._generalizationNode.hide()\n        }\n    }\n\n    /** \n     * javascript comment \n     * @Author: 王林25 \n     * @Date: 2022-08-01 09:57:42 \n     * @Desc: 显示概要节点 \n     */\n    showGeneralization() {\n        if (this._generalizationLine) {\n            this._generalizationLine.show()\n        }\n        if (this._generalizationNode) {\n            this._generalizationNode.show()\n        }\n    }\n\n    /** \n     * @Author: 王林 \n     * @Date: 2021-07-10 17:59:14 \n     * @Desc: 创建或更新展开收缩按钮内容 \n     */\n    updateExpandBtnNode() {\n        if (this._expandBtn) {\n            this._expandBtn.clear()\n        }\n        let iconSvg\n        if (this.nodeData.data.expand === false) {\n            iconSvg = btnsSvg.open\n        } else {\n            iconSvg = btnsSvg.close\n        }\n        let node = SVG(iconSvg).size(this.expandBtnSize, this.expandBtnSize)\n        let fillNode = new Circle().size(this.expandBtnSize)\n        node.x(0).y(-this.expandBtnSize / 2)\n        fillNode.x(0).y(-this.expandBtnSize / 2)\n        this.style.iconBtn(node, fillNode)\n        this._expandBtn.add(fillNode).add(node)\n    }\n\n    /** \n     * javascript comment \n     * @Author: 王林25 \n     * @Date: 2021-07-12 18:18:13 \n     * @Desc: 更新展开收缩按钮位置 \n     */\n    updateExpandBtnPos() {\n        if (!this._expandBtn) {\n            return\n        }\n        this.renderer.layout.renderExpandBtn(this, this._expandBtn)\n    }\n\n    /** \n     * @Author: 王林 \n     * @Date: 2021-04-11 19:47:01 \n     * @Desc: 展开收缩按钮 \n     */\n    renderExpandBtn() {\n        if (!this.nodeData.children || this.nodeData.children.length <= 0 || this.isRoot) {\n            return\n        }\n        this._expandBtn = new G()\n        this.updateExpandBtnNode()\n        this._expandBtn.on('mouseover', (e) => {\n            e.stopPropagation()\n            this._expandBtn.css({\n                cursor: 'pointer'\n            })\n        })\n        this._expandBtn.on('mouseout', (e) => {\n            e.stopPropagation()\n            this._expandBtn.css({\n                cursor: 'auto'\n            })\n        })\n        this._expandBtn.on('click', (e) => {\n            e.stopPropagation()\n            // 展开收缩\n            this.mindMap.execCommand('SET_NODE_EXPAND', this, !this.nodeData.data.expand)\n            this.mindMap.emit('expand_btn_click', this)\n        })\n        this.group.add(this._expandBtn)\n        this.updateExpandBtnPos()\n    }\n\n    /** \n     * @Author: 王林 \n     * @Date: 2021-07-11 13:26:00 \n     * @Desc: 移除展开收缩按钮 \n     */\n    removeExpandBtn() {\n        if (this._expandBtn) {\n            this._expandBtn.off(['mouseover', 'mouseout', 'click'])\n            this._expandBtn.clear()\n            this._expandBtn.remove()\n            this._expandBtn = null\n        }\n    }\n\n    \n    /** \n     * javascript comment \n     * @Author: 王林25 \n     * @Date: 2021-11-25 09:51:37 \n     * @Desc: 检测当前节点是否是某个节点的祖先节点\n     */\n    isParent(node) {\n        if (this === node) {\n            return false\n        }\n        let parent = node.parent\n        while(parent) {\n            if (this === parent) {\n                return true\n            }\n            parent = parent.parent\n        }\n        return false\n    }\n\n    /** \n     * javascript comment \n     * @Author: 王林25 \n     * @Date: 2021-11-25 10:32:34 \n     * @Desc: 检测当前节点是否是某个节点的兄弟节点\n     */\n    isBrother(node) {\n        if (!this.parent || this === node) {\n            return false\n        }\n        return this.parent.children.find((item) => {\n            return item === node\n        })\n    }\n\n    /** \n     * @Author: 王林 \n     * @Date: 2021-06-20 22:51:57 \n     * @Desc: 获取padding值 \n     */\n    getPaddingVale() {\n        return {\n            paddingX: this.getStyle('paddingX', true, this.nodeData.data.isActive),\n            paddingY: this.getStyle('paddingY', true, this.nodeData.data.isActive)\n        }\n    }\n\n    /** \n     * @Author: 王林 \n     * @Date: 2021-05-04 21:48:49 \n     * @Desc: 获取某个样式 \n     */\n    getStyle(prop, root, isActive) {\n        let v = this.style.merge(prop, root, isActive)\n        return v === undefined ? '' : v\n    }\n\n    /** \n     * @Author: 王林 \n     * @Date: 2021-05-04 22:18:07 \n     * @Desc: 修改某个样式 \n     */\n    setStyle(prop, value, isActive) {\n        this.mindMap.execCommand('SET_NODE_STYLE', this, prop, value, isActive)\n    }\n\n    /** \n     * @Author: 王林 \n     * @Date: 2021-06-22 22:04:02 \n     * @Desc: 获取数据 \n     */\n    getData(key) {\n        return key ? this.nodeData.data[key] || '' : this.nodeData.data\n    }\n\n    /** \n     * @Author: 王林 \n     * @Date: 2021-06-22 22:12:01 \n     * @Desc: 设置数据 \n     */\n    setData(data = {}) {\n        this.mindMap.execCommand('SET_NODE_DATA', this, data)\n    }\n\n    /** \n     * @Author: 王林 \n     * @Date: 2021-07-10 08:41:28 \n     * @Desc: 设置文本 \n     */\n    setText(text) {\n        this.mindMap.execCommand('SET_NODE_TEXT', this, text)\n    }\n\n    /** \n     * @Author: 王林 \n     * @Date: 2021-07-10 08:42:19 \n     * @Desc: 设置图片 \n     */\n    setImage(imgData) {\n        this.mindMap.execCommand('SET_NODE_IMAGE', this, imgData)\n    }\n\n    /** \n     * @Author: 王林 \n     * @Date: 2021-07-10 08:47:29 \n     * @Desc: 设置图标 \n     */\n    setIcon(icons) {\n        this.mindMap.execCommand('SET_NODE_ICON', this, icons)\n    }\n\n    /** \n     * @Author: 王林 \n     * @Date: 2021-07-10 08:50:41 \n     * @Desc: 设置超链接 \n     */\n    setHyperlink(link, title) {\n        this.mindMap.execCommand('SET_NODE_HYPERLINK', this, link, title)\n    }\n\n    /** \n     * @Author: 王林 \n     * @Date: 2021-07-10 08:53:24 \n     * @Desc: 设置备注 \n     */\n    setNote(note) {\n        this.mindMap.execCommand('SET_NODE_NOTE', this, note)\n    }\n\n    /** \n     * @Author: 王林 \n     * @Date: 2021-07-10 08:55:08 \n     * @Desc: 设置标签 \n     */\n    setTag(tag) {\n        this.mindMap.execCommand('SET_NODE_TAG', this, tag)\n    }\n}\n\nexport default Node\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
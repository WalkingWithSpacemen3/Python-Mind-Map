{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport Vue from 'vue';\nimport App from './App.vue';\nimport router from './router';\nimport store from './store';\nimport ElementUI from 'element-ui';\nimport 'element-ui/lib/theme-chalk/index.css';\nimport request from \"@/utils/request\";\nVue.config.productionTip = false;\nVue.use(ElementUI);\nimport * as echarts from 'echarts';\nVue.prototype.$echarts = echarts;\nnew Vue({\n  router,\n  store,\n  el: '#app',\n  render: h => h(App)\n}).$mount('#app'); //设置axios请求头加入token\n\nrequest.interceptors.request.use(config => {\n  if (config.push === '/') {} else {\n    if (localStorage.getItem('token')) {\n      //在请求头加入token，名字要和后端接收请求头的token名字一样\n      config.headers.token = localStorage.getItem('token');\n    }\n  }\n\n  return config;\n}, error => {\n  return Promise.reject(error);\n}); //响应回来token是否过期\n\nrequest.interceptors.response.use(response => {\n  //和后端token失效返回码约定403\n  if (response.data.code === 403) {\n    // 引用elementui message提示框\n    ElementUI.Message({\n      message: '身份已失效',\n      type: 'err'\n    }); //清除token\n\n    localStorage.removeItem('token'); //跳转\n    // router.push({name: 'login'});\n  } else {\n    return response;\n  }\n}, error => {\n  return Promise.reject(error);\n});","map":{"version":3,"names":["Vue","App","router","store","ElementUI","request","config","productionTip","use","echarts","prototype","$echarts","el","render","h","$mount","interceptors","push","localStorage","getItem","headers","token","error","Promise","reject","response","data","code","Message","message","type","removeItem"],"sources":["C:/Users/13007/Documents/GinTest/vue/src/main.js"],"sourcesContent":["import Vue from 'vue'\nimport App from './App.vue'\nimport router from './router'\nimport store from './store'\nimport ElementUI from 'element-ui';\nimport 'element-ui/lib/theme-chalk/index.css';\nimport request from \"@/utils/request\";\n\nVue.config.productionTip = false\nVue.use(ElementUI);\nimport * as echarts from 'echarts'\nVue.prototype.$echarts = echarts\nnew Vue({\n  router,\n  store,\n  el: '#app',\n  render: h => h(App)\n}).$mount('#app')\n\n//设置axios请求头加入token\nrequest.interceptors.request.use(config => {\n        if (config.push === '/') {\n        } else {\n            if (localStorage.getItem('token')) {\n                //在请求头加入token，名字要和后端接收请求头的token名字一样\n                config.headers.token=localStorage.getItem('token');\n            }\n        }\n        return config;\n    },\n    error => {\n        return Promise.reject(error);\n    });\n\n//响应回来token是否过期\nrequest.interceptors.response.use(response => {\n        //和后端token失效返回码约定403\n        if (response.data.code === 403) {\n            // 引用elementui message提示框\n            ElementUI.Message({\n                message: '身份已失效',\n                type: 'err'\n            });\n            //清除token\n            localStorage.removeItem('token');\n            //跳转\n            // router.push({name: 'login'});\n        } else {\n            return response\n        }\n    },\n    error => {\n        return Promise.reject(error);\n    })\n\n"],"mappings":";AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,GAAP,MAAgB,WAAhB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAO,sCAAP;AACA,OAAOC,OAAP,MAAoB,iBAApB;AAEAL,GAAG,CAACM,MAAJ,CAAWC,aAAX,GAA2B,KAA3B;AACAP,GAAG,CAACQ,GAAJ,CAAQJ,SAAR;AACA,OAAO,KAAKK,OAAZ,MAAyB,SAAzB;AACAT,GAAG,CAACU,SAAJ,CAAcC,QAAd,GAAyBF,OAAzB;AACA,IAAIT,GAAJ,CAAQ;EACNE,MADM;EAENC,KAFM;EAGNS,EAAE,EAAE,MAHE;EAINC,MAAM,EAAEC,CAAC,IAAIA,CAAC,CAACb,GAAD;AAJR,CAAR,EAKGc,MALH,CAKU,MALV,E,CAOA;;AACAV,OAAO,CAACW,YAAR,CAAqBX,OAArB,CAA6BG,GAA7B,CAAiCF,MAAM,IAAI;EACnC,IAAIA,MAAM,CAACW,IAAP,KAAgB,GAApB,EAAyB,CACxB,CADD,MACO;IACH,IAAIC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAJ,EAAmC;MAC/B;MACAb,MAAM,CAACc,OAAP,CAAeC,KAAf,GAAqBH,YAAY,CAACC,OAAb,CAAqB,OAArB,CAArB;IACH;EACJ;;EACD,OAAOb,MAAP;AACH,CATL,EAUIgB,KAAK,IAAI;EACL,OAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACH,CAZL,E,CAcA;;AACAjB,OAAO,CAACW,YAAR,CAAqBS,QAArB,CAA8BjB,GAA9B,CAAkCiB,QAAQ,IAAI;EACtC;EACA,IAAIA,QAAQ,CAACC,IAAT,CAAcC,IAAd,KAAuB,GAA3B,EAAgC;IAC5B;IACAvB,SAAS,CAACwB,OAAV,CAAkB;MACdC,OAAO,EAAE,OADK;MAEdC,IAAI,EAAE;IAFQ,CAAlB,EAF4B,CAM5B;;IACAZ,YAAY,CAACa,UAAb,CAAwB,OAAxB,EAP4B,CAQ5B;IACA;EACH,CAVD,MAUO;IACH,OAAON,QAAP;EACH;AACJ,CAfL,EAgBIH,KAAK,IAAI;EACL,OAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACH,CAlBL"},"metadata":{},"sourceType":"module"}